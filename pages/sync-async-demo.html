<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>åŒæ­¥ vs å¼‚æ­¥ - å¯è§†åŒ–æ¼”ç¤º</title>
  <script src="../components/header.js" defer></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: 'PingFang SC', 'Microsoft YaHei', -apple-system, sans-serif;
      background: linear-gradient(135deg, #0c0c1e 0%, #1a1a3e 50%, #0d1f3c 100%);
      min-height: 100vh;
      color: #e4e4e4;
      padding: 30px 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin: 20px 0 40px;
    }
    .header h1 {
      font-size: 2.8rem;
      font-weight: 700;
      background: linear-gradient(90deg, #00d4ff, #ff6b9d, #c084fc, #00d4ff);
      background-size: 300% 100%;
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradient 6s ease infinite;
    }
    @keyframes gradient {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .header p {
      color: rgba(255,255,255,0.5);
      margin-top: 12px;
      font-size: 1.1rem;
    }

    /* åœºæ™¯é€‰æ‹© */
    .scene-tabs {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 40px;
      flex-wrap: wrap;
    }
    .scene-tab {
      padding: 12px 24px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 30px;
      color: rgba(255,255,255,0.7);
      cursor: pointer;
      transition: all 0.3s;
      font-size: 14px;
    }
    .scene-tab:hover {
      background: rgba(255,255,255,0.1);
      border-color: rgba(255,255,255,0.2);
    }
    .scene-tab.active {
      background: linear-gradient(135deg, #00d4ff, #c084fc);
      border-color: transparent;
      color: white;
      font-weight: 600;
    }

    /* æ¼”ç¤ºåŒºåŸŸ */
    .demo-area {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-bottom: 40px;
    }
    @media (max-width: 900px) {
      .demo-area { grid-template-columns: 1fr; }
    }

    .demo-box {
      background: rgba(255,255,255,0.03);
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.08);
      padding: 25px;
      backdrop-filter: blur(10px);
    }
    .demo-box h2 {
      font-size: 1.3rem;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .demo-box.sync h2 { color: #ff6b6b; }
    .demo-box.async h2 { color: #4ade80; }
    
    .demo-box .subtitle {
      color: rgba(255,255,255,0.4);
      font-size: 13px;
      margin-bottom: 20px;
    }

    /* ä»»åŠ¡è½¨é“ */
    .track-container {
      background: rgba(0,0,0,0.3);
      border-radius: 12px;
      padding: 20px;
      min-height: 200px;
    }
    .track {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
      height: 40px;
    }
    .track:last-child { margin-bottom: 0; }
    .track-label {
      width: 80px;
      font-size: 12px;
      color: rgba(255,255,255,0.6);
      flex-shrink: 0;
    }
    .track-bar {
      flex: 1;
      height: 100%;
      background: rgba(255,255,255,0.05);
      border-radius: 8px;
      position: relative;
      overflow: hidden;
    }
    .task-block {
      position: absolute;
      height: 100%;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 600;
      color: white;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .task-block.active { opacity: 1; }
    .task-block.task1 { background: linear-gradient(135deg, #f472b6, #ec4899); }
    .task-block.task2 { background: linear-gradient(135deg, #60a5fa, #3b82f6); }
    .task-block.task3 { background: linear-gradient(135deg, #a78bfa, #8b5cf6); }
    .task-block.waiting { 
      background: repeating-linear-gradient(45deg, rgba(255,255,255,0.1), rgba(255,255,255,0.1) 5px, transparent 5px, transparent 10px);
    }

    /* æ—¶é—´è½´ */
    .timeline {
      display: flex;
      justify-content: space-between;
      margin-top: 15px;
      padding: 0 80px;
      font-size: 11px;
      color: rgba(255,255,255,0.3);
    }

    /* ç»Ÿè®¡ */
    .stats-row {
      display: flex;
      justify-content: space-around;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    .stat-item {
      text-align: center;
    }
    .stat-value {
      font-size: 1.8rem;
      font-weight: 700;
    }
    .sync .stat-value { color: #ff6b6b; }
    .async .stat-value { color: #4ade80; }
    .stat-label {
      font-size: 12px;
      color: rgba(255,255,255,0.4);
      margin-top: 4px;
    }

    /* æ§åˆ¶æŒ‰é’® */
    .controls {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 40px;
    }
    .btn {
      padding: 14px 32px;
      font-size: 15px;
      font-weight: 600;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      transition: all 0.3s;
    }
    .btn-primary {
      background: linear-gradient(135deg, #00d4ff, #c084fc);
      color: white;
      box-shadow: 0 5px 25px rgba(0, 212, 255, 0.3);
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 35px rgba(0, 212, 255, 0.4);
    }
    .btn-secondary {
      background: rgba(255,255,255,0.1);
      color: white;
      border: 1px solid rgba(255,255,255,0.2);
    }
    .btn-secondary:hover {
      background: rgba(255,255,255,0.15);
    }
    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none !important;
    }

    /* è§£é‡Šå¡ç‰‡ */
    .explanation {
      background: rgba(255,255,255,0.03);
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.08);
      padding: 30px;
      margin-bottom: 30px;
    }
    .explanation h3 {
      color: #00d4ff;
      margin-bottom: 15px;
      font-size: 1.2rem;
    }
    .explanation p {
      color: rgba(255,255,255,0.7);
      line-height: 1.8;
      margin-bottom: 12px;
    }
    .explanation code {
      background: rgba(0,212,255,0.1);
      color: #00d4ff;
      padding: 2px 8px;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
    }

    /* ä»£ç å¯¹æ¯” */
    .code-compare {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }
    @media (max-width: 900px) {
      .code-compare { grid-template-columns: 1fr; }
    }
    .code-block {
      background: #1e1e2e;
      border-radius: 12px;
      overflow: hidden;
    }
    .code-header {
      background: rgba(255,255,255,0.05);
      padding: 10px 15px;
      font-size: 13px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .code-header.sync { color: #ff6b6b; }
    .code-header.async { color: #4ade80; }
    .code-content {
      padding: 15px;
      font-family: 'Fira Code', 'Consolas', monospace;
      font-size: 13px;
      line-height: 1.6;
      overflow-x: auto;
    }
    .code-content .keyword { color: #c084fc; }
    .code-content .function { color: #60a5fa; }
    .code-content .string { color: #4ade80; }
    .code-content .comment { color: rgba(255,255,255,0.3); }

    /* ç”Ÿæ´»ç±»æ¯” */
    .analogy {
      background: linear-gradient(135deg, rgba(192, 132, 252, 0.1), rgba(0, 212, 255, 0.1));
      border-radius: 16px;
      padding: 25px;
      margin-top: 30px;
      border: 1px solid rgba(192, 132, 252, 0.2);
    }
    .analogy h3 {
      color: #c084fc;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .analogy-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    @media (max-width: 600px) {
      .analogy-content { grid-template-columns: 1fr; }
    }
    .analogy-item {
      background: rgba(0,0,0,0.2);
      border-radius: 12px;
      padding: 20px;
    }
    .analogy-item h4 {
      font-size: 14px;
      margin-bottom: 10px;
    }
    .analogy-item.sync h4 { color: #ff6b6b; }
    .analogy-item.async h4 { color: #4ade80; }
    .analogy-item p {
      color: rgba(255,255,255,0.6);
      font-size: 14px;
      line-height: 1.6;
    }
  </style>
</head>
<body>

<div class="container">
  <div class="header">
    <h1>âš¡ åŒæ­¥ vs å¼‚æ­¥</h1>
    <p>ä¸€çœ‹å°±æ‡‚çš„å¯è§†åŒ–æ¼”ç¤º</p>
  </div>

  <div class="scene-tabs">
    <div class="scene-tab active" onclick="switchScene('restaurant')">ğŸœ é¤å…ç‚¹é¤</div>
    <div class="scene-tab" onclick="switchScene('download')">ğŸ“¥ æ–‡ä»¶ä¸‹è½½</div>
    <div class="scene-tab" onclick="switchScene('api')">ğŸŒ APIè¯·æ±‚</div>
  </div>

  <div class="controls">
    <button class="btn btn-primary" id="startBtn" onclick="startDemo()">â–¶ï¸ å¼€å§‹æ¼”ç¤º</button>
    <button class="btn btn-secondary" onclick="resetDemo()">ğŸ”„ é‡ç½®</button>
  </div>

  <div class="demo-area">
    <!-- åŒæ­¥æ¼”ç¤º -->
    <div class="demo-box sync">
      <h2>ğŸ”´ åŒæ­¥æ¨¡å¼</h2>
      <p class="subtitle" id="syncSubtitle">ä¸€ä¸ªä»»åŠ¡å®Œæˆåæ‰èƒ½å¼€å§‹ä¸‹ä¸€ä¸ª</p>
      
      <div class="track-container">
        <div class="track">
          <span class="track-label">ä¸»çº¿ç¨‹</span>
          <div class="track-bar" id="syncTrack">
            <div class="task-block task1" id="syncTask1" style="left:0; width:33%">ä»»åŠ¡1</div>
            <div class="task-block task2" id="syncTask2" style="left:33%; width:33%">ä»»åŠ¡2</div>
            <div class="task-block task3" id="syncTask3" style="left:66%; width:34%">ä»»åŠ¡3</div>
          </div>
        </div>
        <div class="timeline">
          <span>0s</span><span>3s</span><span>6s</span><span>9s</span>
        </div>
      </div>
      
      <div class="stats-row">
        <div class="stat-item">
          <div class="stat-value" id="syncTime">-</div>
          <div class="stat-label">æ€»è€—æ—¶</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="syncBlocked">-</div>
          <div class="stat-label">é˜»å¡æ—¶é—´</div>
        </div>
      </div>
    </div>

    <!-- å¼‚æ­¥æ¼”ç¤º -->
    <div class="demo-box async">
      <h2>ğŸŸ¢ å¼‚æ­¥æ¨¡å¼</h2>
      <p class="subtitle" id="asyncSubtitle">å¤šä¸ªä»»åŠ¡å¯ä»¥åŒæ—¶è¿›è¡Œ</p>
      
      <div class="track-container">
        <div class="track">
          <span class="track-label">ä»»åŠ¡1</span>
          <div class="track-bar">
            <div class="task-block task1" id="asyncTask1" style="left:0; width:33%">æ‰§è¡Œä¸­</div>
          </div>
        </div>
        <div class="track">
          <span class="track-label">ä»»åŠ¡2</span>
          <div class="track-bar">
            <div class="task-block task2" id="asyncTask2" style="left:0; width:33%">æ‰§è¡Œä¸­</div>
          </div>
        </div>
        <div class="track">
          <span class="track-label">ä»»åŠ¡3</span>
          <div class="track-bar">
            <div class="task-block task3" id="asyncTask3" style="left:0; width:33%">æ‰§è¡Œä¸­</div>
          </div>
        </div>
        <div class="timeline">
          <span>0s</span><span>3s</span><span>6s</span><span>9s</span>
        </div>
      </div>
      
      <div class="stats-row">
        <div class="stat-item">
          <div class="stat-value" id="asyncTime">-</div>
          <div class="stat-label">æ€»è€—æ—¶</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="asyncSaved">-</div>
          <div class="stat-label">èŠ‚çœæ—¶é—´</div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// åœºæ™¯é…ç½®
const scenes = {
  restaurant: {
    name: 'é¤å…ç‚¹é¤',
    syncSubtitle: 'æœåŠ¡å‘˜ç­‰ä¸€æ¡Œç‚¹å®Œæ‰å»ä¸‹ä¸€æ¡Œ',
    asyncSubtitle: 'æœåŠ¡å‘˜åŒæ—¶æ¥å¾…å¤šæ¡Œå®¢äºº',
    tasks: ['ç‚¹é¤', 'ä¸Šèœ', 'ç»“è´¦'],
    durations: [3, 3, 3]
  },
  download: {
    name: 'æ–‡ä»¶ä¸‹è½½',
    syncSubtitle: 'ä¸‹è½½å®Œä¸€ä¸ªæ–‡ä»¶æ‰èƒ½ä¸‹è½½ä¸‹ä¸€ä¸ª',
    asyncSubtitle: 'å¤šä¸ªæ–‡ä»¶åŒæ—¶ä¸‹è½½',
    tasks: ['æ–‡ä»¶A', 'æ–‡ä»¶B', 'æ–‡ä»¶C'],
    durations: [3, 3, 3]
  },
  api: {
    name: 'APIè¯·æ±‚',
    syncSubtitle: 'ç­‰å¾…å“åº”æœŸé—´ç¨‹åºå¡ä½',
    asyncSubtitle: 'å‘èµ·è¯·æ±‚åç»§ç»­æ‰§è¡Œå…¶ä»–ä»£ç ',
    tasks: ['ç”¨æˆ·ä¿¡æ¯', 'è®¢å•åˆ—è¡¨', 'å•†å“æ•°æ®'],
    durations: [3, 3, 3]
  }
};

let currentScene = 'restaurant';
let isRunning = false;

function switchScene(scene) {
  if (isRunning) return;
  currentScene = scene;
  
  document.querySelectorAll('.scene-tab').forEach(tab => tab.classList.remove('active'));
  event.target.classList.add('active');
  
  const config = scenes[scene];
  document.getElementById('syncSubtitle').textContent = config.syncSubtitle;
  document.getElementById('asyncSubtitle').textContent = config.asyncSubtitle;
  
  // æ›´æ–°ä»»åŠ¡åç§°
  document.getElementById('syncTask1').textContent = config.tasks[0];
  document.getElementById('syncTask2').textContent = config.tasks[1];
  document.getElementById('syncTask3').textContent = config.tasks[2];
  document.getElementById('asyncTask1').textContent = config.tasks[0];
  document.getElementById('asyncTask2').textContent = config.tasks[1];
  document.getElementById('asyncTask3').textContent = config.tasks[2];
  
  resetDemo();
}

function startDemo() {
  if (isRunning) return;
  isRunning = true;
  document.getElementById('startBtn').disabled = true;
  
  // é‡ç½®çŠ¶æ€
  resetVisuals();
  
  const config = scenes[currentScene];
  const totalSync = config.durations.reduce((a, b) => a + b, 0);
  const totalAsync = Math.max(...config.durations);
  
  // åŒæ­¥åŠ¨ç”» - é¡ºåºæ‰§è¡Œ
  setTimeout(() => {
    document.getElementById('syncTask1').classList.add('active');
  }, 0);
  
  setTimeout(() => {
    document.getElementById('syncTask2').classList.add('active');
  }, 1000);
  
  setTimeout(() => {
    document.getElementById('syncTask3').classList.add('active');
  }, 2000);
  
  setTimeout(() => {
    document.getElementById('syncTime').textContent = totalSync + 's';
    document.getElementById('syncBlocked').textContent = (totalSync - config.durations[0]) + 's';
  }, 3000);
  
  // å¼‚æ­¥åŠ¨ç”» - åŒæ—¶æ‰§è¡Œ
  setTimeout(() => {
    document.getElementById('asyncTask1').classList.add('active');
    document.getElementById('asyncTask2').classList.add('active');
    document.getElementById('asyncTask3').classList.add('active');
  }, 0);
  
  setTimeout(() => {
    document.getElementById('asyncTime').textContent = totalAsync + 's';
    document.getElementById('asyncSaved').textContent = (totalSync - totalAsync) + 's';
    isRunning = false;
    document.getElementById('startBtn').disabled = false;
  }, 1000);
}

function resetDemo() {
  isRunning = false;
  document.getElementById('startBtn').disabled = false;
  resetVisuals();
  
  document.getElementById('syncTime').textContent = '-';
  document.getElementById('syncBlocked').textContent = '-';
  document.getElementById('asyncTime').textContent = '-';
  document.getElementById('asyncSaved').textContent = '-';
}

function resetVisuals() {
  document.querySelectorAll('.task-block').forEach(block => {
    block.classList.remove('active');
  });
}

// åˆå§‹åŒ–
switchScene('restaurant');
</script>

<!-- è§£é‡Šéƒ¨åˆ† -->
<div class="container">
  <div class="explanation">
    <h3>ğŸ’¡ ä¸€å¥è¯ç†è§£</h3>
    <p><strong>åŒæ­¥</strong>ï¼šåšå®Œä¸€ä»¶äº‹æ‰èƒ½åšä¸‹ä¸€ä»¶ï¼Œä¸­é—´åªèƒ½å¹²ç­‰ç€ã€‚å°±åƒæ’é˜Ÿä¹°å¥¶èŒ¶ï¼Œå‰é¢çš„äººä¸èµ°ä½ å°±å¾—ç­‰ã€‚</p>
    <p><strong>å¼‚æ­¥</strong>ï¼šå‘èµ·ä¸€ä¸ªä»»åŠ¡åä¸ç”¨ç­‰å®ƒå®Œæˆï¼Œå¯ä»¥å…ˆå»åšåˆ«çš„äº‹ã€‚å°±åƒç‚¹äº†å¤–å–ç»§ç»­å·¥ä½œï¼Œå¤–å–åˆ°äº†å†å»æ‹¿ã€‚</p>
  </div>

  <div class="explanation">
    <h3>ğŸ”§ ä»£ç å¯¹æ¯”</h3>
    <div class="code-compare">
      <div class="code-block">
        <div class="code-header sync">ğŸ”´ åŒæ­¥ä»£ç </div>
        <div class="code-content">
<span class="comment">// åŒæ­¥ï¼šæŒ‰é¡ºåºæ‰§è¡Œï¼Œä¼šé˜»å¡</span><br/>
<span class="keyword">const</span> user = <span class="function">getUser</span>(<span class="string">'123'</span>);     <span class="comment">// ç­‰3ç§’</span><br/>
<span class="keyword">const</span> orders = <span class="function">getOrders</span>(user.id); <span class="comment">// å†ç­‰3ç§’</span><br/>
<span class="keyword">const</span> products = <span class="function">getProducts</span>();   <span class="comment">// å†ç­‰3ç§’</span><br/>
<span class="comment">// æ€»å…±éœ€è¦ 9 ç§’</span>
        </div>
      </div>
      <div class="code-block">
        <div class="code-header async">ğŸŸ¢ å¼‚æ­¥ä»£ç </div>
        <div class="code-content">
<span class="comment">// å¼‚æ­¥ï¼šåŒæ—¶å‘èµ·ï¼Œä¸é˜»å¡</span><br/>
<span class="keyword">const</span> [user, orders, products] = 
  <span class="keyword">await</span> <span class="function">Promise.all</span>([<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="function">getUser</span>(<span class="string">'123'</span>),<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="function">getOrders</span>(<span class="string">'123'</span>),<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="function">getProducts</span>()<br/>
  ]);<br/>
<span class="comment">// æ€»å…±åªéœ€è¦ 3 ç§’ï¼</span>
        </div>
      </div>
    </div>
  </div>

  <div class="analogy">
    <h3>ğŸ¯ ç”Ÿæ´»ä¸­çš„ä¾‹å­</h3>
    <div class="analogy-content">
      <div class="analogy-item sync">
        <h4>ğŸ”´ åŒæ­¥åœºæ™¯</h4>
        <p>â€¢ æ’é˜Ÿå–å·ç­‰å«å·<br>â€¢ æ‰“ç”µè¯ç­‰å¯¹æ–¹æ¥å¬<br>â€¢ ATMæœºå‰æ’é˜Ÿå–é’±<br>â€¢ ç­‰çº¢ç»¿ç¯è¿‡é©¬è·¯</p>
      </div>
      <div class="analogy-item async">
        <h4>ğŸŸ¢ å¼‚æ­¥åœºæ™¯</h4>
        <p>â€¢ ç‚¹å¤–å–åç»§ç»­å·¥ä½œ<br>â€¢ æ´—è¡£æœºæ´—è¡£æœæ—¶çœ‹ç”µè§†<br>â€¢ å‘å¾®ä¿¡åä¸ç”¨ç­‰å›å¤<br>â€¢ é¢„çº¦æŒ‚å·åå…ˆå»åŠåˆ«çš„äº‹</p>
      </div>
    </div>
  </div>

  <div class="explanation" style="margin-top: 30px;">
    <h3>ğŸ“ ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªï¼Ÿ</h3>
    <p><strong>ç”¨åŒæ­¥</strong>ï¼šå½“åç»­æ“ä½œä¾èµ–å‰ä¸€æ­¥çš„ç»“æœæ—¶ã€‚æ¯”å¦‚å¿…é¡»å…ˆç™»å½•æ‰èƒ½è·å–ç”¨æˆ·ä¿¡æ¯ã€‚</p>
    <p><strong>ç”¨å¼‚æ­¥</strong>ï¼šå½“å¤šä¸ªæ“ä½œç›¸äº’ç‹¬ç«‹ã€å¯ä»¥å¹¶è¡Œæ—¶ã€‚æ¯”å¦‚åŒæ—¶åŠ è½½é¡µé¢çš„å¤šä¸ªæ¨¡å—ã€‚</p>
    <p style="margin-top: 15px; padding: 15px; background: rgba(0,212,255,0.1); border-radius: 8px;">
      <strong>è®°ä½</strong>ï¼šå¼‚æ­¥ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œä½†åœ¨ I/O å¯†é›†å‹æ“ä½œï¼ˆç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ã€æ•°æ®åº“æŸ¥è¯¢ï¼‰ä¸­ï¼Œå¼‚æ­¥èƒ½æ˜¾è‘—æå‡æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚
    </p>
  </div>
</div>

</body>
</html>
