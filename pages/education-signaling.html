<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å­¦å†ä¿¡å·æ¨¡å‹ï¼šä¸ºä»€ä¹ˆä¼ä¸šçœ‹å­¦å†ï¼Ÿ</title>
  <script src="../components/header.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      min-height: 100vh; padding: 20px; color: #e0e0e0;
    }
    .container { max-width: 1200px; margin: 0 auto; }
    .header { text-align: center; margin-bottom: 40px; padding: 30px 20px; }
    .header h1 {
      font-size: 2.5em;
      background: linear-gradient(45deg, #ffd700, #ffed4e, #ffd700);
      background-size: 200% auto;
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      background-clip: text; animation: shimmer 3s linear infinite; margin-bottom: 15px;
    }
    @keyframes shimmer { to { background-position: 200% center; } }
    .header p { font-size: 1.1em; color: #b0b0b0; line-height: 1.6; }
    .card {
      background: rgba(255,255,255,0.05); border-radius: 15px; padding: 25px;
      margin-bottom: 25px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1);
    }
    .card h2 { color: #ffd700; margin-bottom: 20px; font-size: 1.5em; }
    .simulator { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
    @media (max-width: 768px) {
      .simulator { grid-template-columns: 1fr; }
      .header h1 { font-size: 1.8em; }
    }
    .control-panel { background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; }
    .control-group { margin-bottom: 20px; }
    .control-group label { display: block; margin-bottom: 8px; color: #ffd700; font-weight: 500; }
    input[type="range"] {
      width: 100%; height: 6px; border-radius: 3px;
      background: rgba(255,255,255,0.2); outline: none;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none; width: 18px; height: 18px;
      border-radius: 50%; background: #ffd700; cursor: pointer;
    }
    .value-display { color: #fff; font-size: 1.1em; margin-top: 5px; }
    button {
      background: linear-gradient(135deg, #ffd700, #ffed4e); color: #1a1a2e;
      border: none; padding: 12px 30px; border-radius: 25px; font-size: 1em;
      font-weight: bold; cursor: pointer; transition: transform 0.2s; width: 100%; margin-top: 10px;
    }
    button:hover { transform: translateY(-2px); }
    .btn-blue { background: linear-gradient(135deg, #4a90e2, #357abd); color: white; }
    .chart-container { background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; height: 400px; }
    .stats {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px; margin-top: 20px;
    }
    .stat-box { background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; text-align: center; }
    .stat-label { color: #b0b0b0; font-size: 0.9em; margin-bottom: 5px; }
    .stat-value { color: #ffd700; font-size: 1.5em; font-weight: bold; }
    .stat-value.positive { color: #44ff44; }
    .stat-value.negative { color: #ff4444; }
    .insight {
      background: rgba(255,215,0,0.1); border-left: 4px solid #ffd700;
      padding: 15px; margin-top: 20px; border-radius: 5px;
    }
    .insight-title { color: #ffd700; font-weight: bold; margin-bottom: 10px; }
    .insight-text { color: #e0e0e0; line-height: 1.6; }
    .bls-table { width: 100%; border-collapse: collapse; margin: 15px 0; }
    .bls-table th, .bls-table td {
      padding: 10px 15px; text-align: center;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    .bls-table th { color: #ffd700; font-weight: 600; }
    .bls-table td { color: #e0e0e0; }
    .bls-table tr:hover { background: rgba(255,255,255,0.05); }
    .source-note { color: #888; font-size: 0.85em; margin-top: 10px; font-style: italic; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ“ å­¦å†ä¿¡å·æ¨¡å‹</h1>
      <p>ä¸ºä»€ä¹ˆ"å­¦å†â‰ èƒ½åŠ›"å’Œ"ä¼ä¸šçœ‹å­¦å†"å¯ä»¥åŒæ—¶æˆç«‹ï¼Ÿç”¨è¯ºè´å°”ç»æµå­¦å¥–ç†è®ºå’Œæ•°æ®æ¥è§£é‡Š</p>
    </div>

    <!-- æ¨¡å—ä¸€ï¼šçœŸå®æ•°æ® -->
    <div class="card">
      <h2>ğŸ“Š çœŸå®æ•°æ®ï¼šå­¦å†æº¢ä»·æœ‰å¤šå¤§ï¼Ÿ</h2>
      <p style="color:#b0b0b0; margin-bottom:15px;">ç¾å›½åŠ³å·¥ç»Ÿè®¡å±€ï¼ˆBLSï¼‰2024å¹´æ•°æ®ï¼Œ25å²ä»¥ä¸Šå…¨èŒå·¥ä½œè€…</p>
      <table class="bls-table">
        <thead>
          <tr><th>å­¦å†</th><th>å‘¨è–ªä¸­ä½æ•°</th><th>å¤±ä¸šç‡</th><th>ç›¸å¯¹é«˜ä¸­æº¢ä»·</th></tr>
        </thead>
        <tbody>
          <tr><td>é«˜ä¸­ä»¥ä¸‹</td><td>$738</td><td>6.2%</td><td>-22%</td></tr>
          <tr><td>é«˜ä¸­æ¯•ä¸š</td><td>$946</td><td>4.0%</td><td>åŸºå‡†</td></tr>
          <tr><td>å¤§ä¸“</td><td>$1,058</td><td>3.2%</td><td>+12%</td></tr>
          <tr><td>æœ¬ç§‘</td><td>$1,533</td><td>2.2%</td><td>+62%</td></tr>
          <tr><td>ç¡•å£«</td><td>$1,737</td><td>2.0%</td><td>+84%</td></tr>
          <tr><td>åšå£«</td><td>$2,083</td><td>1.2%</td><td>+120%</td></tr>
        </tbody>
      </table>
      <p class="source-note">æ•°æ®æ¥æºï¼šU.S. Bureau of Labor Statistics, "Education Pays", 2024å¹´åº¦æ•°æ®</p>
      <div style="margin-top:20px;">
        <div class="chart-container">
          <canvas id="blsChart"></canvas>
        </div>
      </div>
      <div class="insight">
        <div class="insight-title">ğŸ’¡ å…³é”®å‘ç°</div>
        <div class="insight-text">
          å­¦å†æ¯å‡ä¸€çº§ï¼Œå‘¨è–ªä¸­ä½æ•°æ˜¾è‘—å¢åŠ ï¼Œå¤±ä¸šç‡æ˜¾è‘—ä¸‹é™ã€‚æœ¬ç§‘æ¯”é«˜ä¸­å‘¨è–ªé«˜62%ï¼Œå¤±ä¸šç‡ä½è¿‘ä¸€åŠã€‚
          è¿™ä¸æ˜¯è¯´å­¦å†ç›´æ¥å¸¦æ¥èƒ½åŠ›ï¼Œè€Œæ˜¯è¯´å¸‚åœºåœ¨ç»Ÿè®¡å±‚é¢ä¸Šç¡®å®ç»™å­¦å†å®šäº†ä»·ã€‚
        </div>
      </div>
    </div>

    <!-- æ¨¡å—äºŒï¼šSpence ä¿¡å·æ¨¡å‹æ¨¡æ‹Ÿ -->
    <div class="card">
      <h2>ğŸ”¬ Spence ä¿¡å·æ¨¡å‹æ¨¡æ‹Ÿ</h2>
      <p style="color:#b0b0b0; margin-bottom:15px;">
        1973å¹´ Michael Spence æå‡ºï¼šå³ä½¿æ•™è‚²ä¸æå‡èƒ½åŠ›ï¼Œå®ƒä»ç„¶æœ‰ä»·å€¼â€”â€”å› ä¸ºè·å–å­¦å†çš„æˆæœ¬ä¸èƒ½åŠ›è´Ÿç›¸å…³ï¼Œå­¦å†å› æ­¤æˆä¸ºèƒ½åŠ›çš„"ä¿¡å·"ã€‚
      </p>
      <div class="simulator">
        <div class="control-panel">
          <div class="control-group">
            <label>é«˜èƒ½åŠ›è€…å æ¯”</label>
            <input type="range" id="highRatio" min="10" max="70" value="40" step="5">
            <div class="value-display"><span id="highRatioVal">40</span>%</div>
          </div>
          <div class="control-group">
            <label>é«˜èƒ½åŠ›è€…å¹´äº§å‡ºï¼ˆä¸‡å…ƒï¼‰</label>
            <input type="range" id="highOutput" min="10" max="30" value="15" step="1">
            <div class="value-display"><span id="highOutputVal">15</span> ä¸‡</div>
          </div>
          <div class="control-group">
            <label>æ™®é€šèƒ½åŠ›è€…å¹´äº§å‡ºï¼ˆä¸‡å…ƒï¼‰</label>
            <input type="range" id="lowOutput" min="3" max="15" value="8" step="1">
            <div class="value-display"><span id="lowOutputVal">8</span> ä¸‡</div>
          </div>
          <div class="control-group">
            <label>é«˜èƒ½åŠ›è€…è·å–å­¦å†æˆæœ¬ï¼ˆä¸‡å…ƒï¼‰</label>
            <input type="range" id="highCost" min="0.5" max="8" value="2" step="0.5">
            <div class="value-display"><span id="highCostVal">2</span> ä¸‡</div>
          </div>
          <div class="control-group">
            <label>æ™®é€šèƒ½åŠ›è€…è·å–å­¦å†æˆæœ¬ï¼ˆä¸‡å…ƒï¼‰</label>
            <input type="range" id="lowCost" min="2" max="15" value="7" step="0.5">
            <div class="value-display"><span id="lowCostVal">7</span> ä¸‡</div>
          </div>
          <button onclick="runSignalingModel()">è®¡ç®—å‡è¡¡</button>
        </div>
        <div class="chart-container">
          <canvas id="signalingChart"></canvas>
        </div>
      </div>
      <div class="stats">
        <div class="stat-box">
          <div class="stat-label">æ— ä¿¡å·æ—¶å¹³å‡å·¥èµ„</div>
          <div class="stat-value" id="poolingWage">-</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">é«˜èƒ½åŠ›è€…å‡€æ”¶ç›Š</div>
          <div class="stat-value" id="highNet">-</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">æ™®é€šèƒ½åŠ›è€…å‡€æ”¶ç›Š</div>
          <div class="stat-value" id="lowNet">-</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">ä¿¡å·å‡è¡¡</div>
          <div class="stat-value" id="equilibrium">-</div>
        </div>
      </div>
      <div class="insight">
        <div class="insight-title">ğŸ’¡ Spence ä¿¡å·ç†è®º</div>
        <div class="insight-text" id="signalingInsight">è°ƒæ•´å‚æ•°åç‚¹å‡»"è®¡ç®—å‡è¡¡"ï¼Œçœ‹çœ‹å­¦å†ä¿¡å·åœ¨ä»€ä¹ˆæ¡ä»¶ä¸‹æœ‰æ•ˆ</div>
      </div>
    </div>

    <!-- æ¨¡å—ä¸‰ï¼šæ‹›è˜æ¨¡æ‹Ÿ -->
    <div class="card">
      <h2>ğŸ¢ æ‹›è˜æ¨¡æ‹Ÿï¼šå­¦å†ç­›é€‰ vs éšæœºæ‹›è˜</h2>
      <p style="color:#b0b0b0; margin-bottom:15px;">æ¨¡æ‹Ÿä¼ä¸šæ‹›è˜ï¼Œå¯¹æ¯”ç”¨å­¦å†ç­›é€‰å’Œéšæœºæ‹›è˜çš„æ•ˆæœ</p>
      <div class="simulator">
        <div class="control-panel">
          <div class="control-group">
            <label>å€™é€‰äººæ€»æ•°</label>
            <input type="range" id="candidates" min="200" max="2000" value="500" step="100">
            <div class="value-display"><span id="candidatesVal">500</span> äºº</div>
          </div>
          <div class="control-group">
            <label>æ‹›è˜åé¢</label>
            <input type="range" id="hireCount" min="10" max="100" value="30" step="5">
            <div class="value-display"><span id="hireCountVal">30</span> äºº</div>
          </div>
          <div class="control-group">
            <label>é«˜èƒ½åŠ›è€…ä¸­æœ‰å­¦å†çš„æ¯”ä¾‹</label>
            <input type="range" id="highEduRate" min="50" max="100" value="85" step="5">
            <div class="value-display"><span id="highEduRateVal">85</span>%</div>
          </div>
          <div class="control-group">
            <label>æ™®é€šèƒ½åŠ›è€…ä¸­æœ‰å­¦å†çš„æ¯”ä¾‹</label>
            <input type="range" id="lowEduRate" min="5" max="60" value="20" step="5">
            <div class="value-display"><span id="lowEduRateVal">20</span>%</div>
          </div>
          <button onclick="runHiringSimulation()">æ¨¡æ‹Ÿä¸€æ¬¡æ‹›è˜</button>
          <button class="btn-blue" onclick="runHiringBatch()">æ¨¡æ‹Ÿ1000æ¬¡çœ‹åˆ†å¸ƒ</button>
        </div>
        <div class="chart-container">
          <canvas id="hiringChart"></canvas>
        </div>
      </div>
      <div class="stats">
        <div class="stat-box">
          <div class="stat-label">å­¦å†ç­›é€‰ï¼šé«˜èƒ½åŠ›å æ¯”</div>
          <div class="stat-value positive" id="eduHighRate">-</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">éšæœºæ‹›è˜ï¼šé«˜èƒ½åŠ›å æ¯”</div>
          <div class="stat-value" id="randHighRate">-</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">ç­›é€‰æå‡</div>
          <div class="stat-value positive" id="improvement">-</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">è¢«è¯¯ç­›çš„é«˜èƒ½åŠ›è€…</div>
          <div class="stat-value negative" id="missedTalent">-</div>
        </div>
      </div>
      <div class="insight">
        <div class="insight-title">ğŸ’¡ ç­›é€‰çš„ä»£ä»·</div>
        <div class="insight-text" id="hiringInsight">ç‚¹å‡»æ¨¡æ‹Ÿï¼Œçœ‹çœ‹å­¦å†ç­›é€‰çš„æ”¶ç›Šå’Œä»£ä»·</div>
      </div>
    </div>

    <!-- æ¨¡å—å››ï¼šå­¦å†é€šèƒ€ -->
    <div class="card">
      <h2>ğŸ“ˆ å­¦å†é€šèƒ€ï¼šä¿¡å·ä»€ä¹ˆæ—¶å€™å¤±çµï¼Ÿ</h2>
      <p style="color:#b0b0b0; margin-bottom:15px;">å½“è¶Šæ¥è¶Šå¤šäººè·å¾—å­¦å†ï¼Œä¿¡å·çš„åŒºåˆ†åº¦ä¼šä¸‹é™</p>
      <div class="simulator">
        <div class="control-panel">
          <div class="control-group">
            <label>å­¦å†æ™®åŠç‡ï¼ˆæ‰€æœ‰äººä¸­æœ‰å­¦å†çš„æ¯”ä¾‹ï¼‰</label>
            <input type="range" id="eduPopularity" min="10" max="95" value="30" step="5">
            <div class="value-display"><span id="eduPopularityVal">30</span>%</div>
          </div>
          <button onclick="runInflationSim()">æ¨¡æ‹Ÿå­¦å†é€šèƒ€æ•ˆæœ</button>
        </div>
        <div class="chart-container">
          <canvas id="inflationChart"></canvas>
        </div>
      </div>
      <div class="insight">
        <div class="insight-title">ğŸ’¡ å­¦å†é€šèƒ€</div>
        <div class="insight-text" id="inflationInsight">
          å½“å­¦å†æ™®åŠç‡ä»30%ä¸Šå‡åˆ°90%ï¼Œå­¦å†çš„ç­›é€‰ç²¾åº¦ä¼šå¤§å¹…ä¸‹é™ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ"éåœ°æœ¬ç§‘"çš„æ—¶ä»£ï¼Œä¼ä¸šå¼€å§‹çœ‹985/211ã€çœ‹ç ”ç©¶ç”Ÿâ€”â€”ä»–ä»¬éœ€è¦æ›´ç¨€ç¼ºçš„ä¿¡å·ã€‚
        </div>
      </div>
    </div>
  </div>

  <script>
    let blsChart, signalingChart, hiringChart, inflationChart;

    // ========== åˆå§‹åŒ– ==========
    function initCharts() {
      const baseOpts = {
        responsive: true, maintainAspectRatio: false,
        plugins: { legend: { labels: { color: '#e0e0e0' } } },
        scales: {
          x: { ticks: { color: '#b0b0b0' }, grid: { color: 'rgba(255,255,255,0.1)' } },
          y: { ticks: { color: '#b0b0b0' }, grid: { color: 'rgba(255,255,255,0.1)' } }
        }
      };
      blsChart = new Chart(document.getElementById('blsChart').getContext('2d'), {
        type: 'bar', data: { labels: [], datasets: [] }, options: { ...baseOpts }
      });
      signalingChart = new Chart(document.getElementById('signalingChart').getContext('2d'), {
        type: 'bar', data: { labels: [], datasets: [] }, options: { ...baseOpts }
      });
      hiringChart = new Chart(document.getElementById('hiringChart').getContext('2d'), {
        type: 'bar', data: { labels: [], datasets: [] }, options: { ...baseOpts }
      });
      inflationChart = new Chart(document.getElementById('inflationChart').getContext('2d'), {
        type: 'line', data: { labels: [], datasets: [] }, options: { ...baseOpts }
      });
      renderBLSChart();
    }

    // ========== æ»‘å—ç»‘å®š ==========
    function bind(id, valId) {
      document.getElementById(id).oninput = function() {
        document.getElementById(valId).textContent = this.value;
      };
    }
    bind('highRatio','highRatioVal'); bind('highOutput','highOutputVal');
    bind('lowOutput','lowOutputVal'); bind('highCost','highCostVal');
    bind('lowCost','lowCostVal'); bind('candidates','candidatesVal');
    bind('hireCount','hireCountVal'); bind('highEduRate','highEduRateVal');
    bind('lowEduRate','lowEduRateVal'); bind('eduPopularity','eduPopularityVal');

    // ========== æ¨¡å—ä¸€ï¼šBLS æ•°æ®å›¾è¡¨ ==========
    function renderBLSChart() {
      const labels = ['é«˜ä¸­ä»¥ä¸‹','é«˜ä¸­','å¤§ä¸“','æœ¬ç§‘','ç¡•å£«','åšå£«'];
      const wages = [738, 946, 1058, 1533, 1737, 2083];
      const unemp = [6.2, 4.0, 3.2, 2.2, 2.0, 1.2];
      blsChart.data.labels = labels;
      blsChart.data.datasets = [
        {
          label: 'å‘¨è–ªä¸­ä½æ•° ($)', data: wages, type: 'bar',
          backgroundColor: 'rgba(255,215,0,0.6)', borderColor: '#ffd700',
          borderWidth: 1, yAxisID: 'y'
        },
        {
          label: 'å¤±ä¸šç‡ (%)', data: unemp, type: 'line',
          borderColor: '#ff6b6b', backgroundColor: 'transparent',
          tension: 0.3, pointRadius: 5, pointBackgroundColor: '#ff6b6b', yAxisID: 'y1'
        }
      ];
      blsChart.options.scales.y = {
        type: 'linear', position: 'left',
        title: { display: true, text: 'å‘¨è–ª ($)', color: '#b0b0b0' },
        ticks: { color: '#b0b0b0' }, grid: { color: 'rgba(255,255,255,0.1)' }
      };
      blsChart.options.scales.y1 = {
        type: 'linear', position: 'right',
        title: { display: true, text: 'å¤±ä¸šç‡ (%)', color: '#b0b0b0' },
        ticks: { color: '#b0b0b0' }, grid: { drawOnChartArea: false }, min: 0, max: 8
      };
      blsChart.update();
    }

    // ========== æ¨¡å—äºŒï¼šSpence ä¿¡å·æ¨¡å‹ ==========
    function calcSignalingEquilibrium(highRatio, highOutput, lowOutput, highCost, lowCost) {
      const lowRatio = 1 - highRatio;
      const poolingWage = lowRatio * lowOutput + highRatio * highOutput;
      const highNetWithSignal = highOutput - highCost;
      const lowNetWithSignal = highOutput - lowCost;
      const highWantsSignal = highNetWithSignal > poolingWage;
      const lowWantsSignal = lowNetWithSignal > poolingWage;
      let eqType;
      if (highWantsSignal && !lowWantsSignal) eqType = 'separating';
      else if (highWantsSignal && lowWantsSignal) eqType = 'pooling_all';
      else if (!highWantsSignal && !lowWantsSignal) eqType = 'pooling_none';
      else eqType = 'broken';
      return { poolingWage, highNetWithSignal, lowNetWithSignal, highWantsSignal, lowWantsSignal, eqType };
    }

    function runSignalingModel() {
      const highRatio = parseFloat(document.getElementById('highRatio').value) / 100;
      const highOutput = parseFloat(document.getElementById('highOutput').value);
      const lowOutput = parseFloat(document.getElementById('lowOutput').value);
      const highCost = parseFloat(document.getElementById('highCost').value);
      const lowCost = parseFloat(document.getElementById('lowCost').value);

      const eq = calcSignalingEquilibrium(highRatio, highOutput, lowOutput, highCost, lowCost);

      document.getElementById('poolingWage').textContent = eq.poolingWage.toFixed(1) + 'ä¸‡';
      document.getElementById('highNet').textContent = eq.highNetWithSignal.toFixed(1) + 'ä¸‡';
      document.getElementById('highNet').className = 'stat-value ' + (eq.highWantsSignal ? 'positive' : 'negative');
      document.getElementById('lowNet').textContent = eq.lowNetWithSignal.toFixed(1) + 'ä¸‡';
      document.getElementById('lowNet').className = 'stat-value ' + (eq.lowWantsSignal ? 'positive' : 'negative');

      const eqLabels = {
        separating: 'âœ… åˆ†ç¦»å‡è¡¡', pooling_all: 'âš ï¸ æ··åŒï¼ˆéƒ½æ‹¿å­¦å†ï¼‰',
        pooling_none: 'âŒ æ··åŒï¼ˆéƒ½ä¸æ‹¿ï¼‰', broken: 'ğŸ’” åå‘ä¿¡å·'
      };
      document.getElementById('equilibrium').textContent = eqLabels[eq.eqType];

      const categories = ['é«˜èƒ½åŠ›-æ‹¿å­¦å†', 'é«˜èƒ½åŠ›-ä¸æ‹¿', 'æ™®é€š-æ‹¿å­¦å†', 'æ™®é€š-ä¸æ‹¿'];
      const incomes = [highOutput, eq.poolingWage, highOutput, eq.poolingWage];
      const costs = [highCost, 0, lowCost, 0];
      const nets = incomes.map((v, i) => v - costs[i]);

      signalingChart.config.type = 'bar';
      signalingChart.data.labels = categories;
      signalingChart.data.datasets = [
        { label: 'æ”¶å…¥ï¼ˆä¸‡ï¼‰', data: incomes, backgroundColor: 'rgba(68,255,68,0.5)', borderColor: '#44ff44', borderWidth: 1 },
        { label: 'å­¦å†æˆæœ¬ï¼ˆä¸‡ï¼‰', data: costs, backgroundColor: 'rgba(255,68,68,0.5)', borderColor: '#ff4444', borderWidth: 1 },
        { label: 'å‡€æ”¶ç›Šï¼ˆä¸‡ï¼‰', data: nets, backgroundColor: 'rgba(255,215,0,0.5)', borderColor: '#ffd700', borderWidth: 1 }
      ];
      signalingChart.options.scales = {
        x: { ticks: { color: '#b0b0b0' }, grid: { color: 'rgba(255,255,255,0.1)' } },
        y: { ticks: { color: '#b0b0b0' }, grid: { color: 'rgba(255,255,255,0.1)' },
             title: { display: true, text: 'ä¸‡å…ƒ', color: '#b0b0b0' } }
      };
      signalingChart.update();

      let insight = '';
      if (eq.eqType === 'separating') {
        insight = 'åˆ†ç¦»å‡è¡¡æˆç«‹ï¼é«˜èƒ½åŠ›è€…æ‹¿å­¦å†å‡€èµš' + eq.highNetWithSignal.toFixed(1) + 'ä¸‡ï¼ˆ> æ··åŒå·¥èµ„' + eq.poolingWage.toFixed(1) + 'ä¸‡ï¼‰ï¼Œ' +
          'æ™®é€šèƒ½åŠ›è€…æ‹¿å­¦å†åªèµš' + eq.lowNetWithSignal.toFixed(1) + 'ä¸‡ï¼ˆ< æ··åŒå·¥èµ„' + eq.poolingWage.toFixed(1) + 'ä¸‡ï¼‰ï¼Œæ‰€ä»¥åªæœ‰é«˜èƒ½åŠ›è€…ä¼šå»æ‹¿å­¦å†ã€‚' +
          'ä¼ä¸šçœ‹åˆ°å­¦å†å°±èƒ½æœ‰æ•ˆåŒºåˆ†èƒ½åŠ›ã€‚è¿™å°±æ˜¯ Spence 1973å¹´è®ºæ–‡çš„æ ¸å¿ƒç»“è®ºã€‚';
      } else if (eq.eqType === 'pooling_all') {
        insight = 'ä¿¡å·å¤±çµï¼å­¦å†æˆæœ¬å¯¹æ™®é€šèƒ½åŠ›è€…æ¥è¯´ä¹Ÿä¸å¤Ÿé«˜ï¼ˆå‡€æ”¶ç›Š' + eq.lowNetWithSignal.toFixed(1) + 'ä¸‡ > æ··åŒå·¥èµ„' + eq.poolingWage.toFixed(1) + 'ä¸‡ï¼‰ï¼Œ' +
          'æ‰€æœ‰äººéƒ½ä¼šå»æ‹¿å­¦å†ï¼Œä¼ä¸šæ— æ³•åŒºåˆ†ã€‚è¿™å°±æ˜¯"å­¦å†é€šèƒ€"çš„æ•°å­¦æœ¬è´¨ã€‚è¯•è¯•æé«˜æ™®é€šèƒ½åŠ›è€…çš„å­¦å†æˆæœ¬ã€‚';
      } else if (eq.eqType === 'pooling_none') {
        insight = 'æ²¡äººæ„¿æ„æ‹¿å­¦å†ï¼é«˜èƒ½åŠ›è€…æ‹¿å­¦å†çš„å‡€æ”¶ç›Š' + eq.highNetWithSignal.toFixed(1) + 'ä¸‡è¿˜ä¸å¦‚æ··åŒå·¥èµ„' + eq.poolingWage.toFixed(1) + 'ä¸‡ã€‚' +
          'å­¦å†æˆæœ¬å¤ªé«˜äº†ï¼Œä¿¡å·æœºåˆ¶æ— æ³•å¯åŠ¨ã€‚è¯•è¯•é™ä½é«˜èƒ½åŠ›è€…çš„å­¦å†æˆæœ¬ã€‚';
      } else {
        insight = 'å¼‚å¸¸æƒ…å†µï¼šæ™®é€šèƒ½åŠ›è€…æƒ³æ‹¿å­¦å†ä½†é«˜èƒ½åŠ›è€…ä¸æƒ³ã€‚è¿™åœ¨ç°å®ä¸­å¾ˆå°‘è§ï¼Œè¯´æ˜å‚æ•°è®¾ç½®ä¸å¤ªåˆç†ã€‚';
      }
      document.getElementById('signalingInsight').textContent = insight;
    }

    // ========== æ¨¡å—ä¸‰ï¼šæ‹›è˜æ¨¡æ‹Ÿ ==========
    function simulateHiring(totalCandidates, hireCount, highAbilityRatio, highEduRate, lowEduRate) {
      const candidates = [];
      for (let i = 0; i < totalCandidates; i++) {
        const isHigh = Math.random() < highAbilityRatio;
        const hasEdu = Math.random() < (isHigh ? highEduRate : lowEduRate);
        candidates.push({ isHigh, hasEdu });
      }
      const withEdu = candidates.filter(c => c.hasEdu);
      const shuffledEdu = withEdu.sort(() => Math.random() - 0.5);
      const eduHires = shuffledEdu.slice(0, Math.min(hireCount, shuffledEdu.length));
      const eduHighCount = eduHires.filter(c => c.isHigh).length;
      const shuffledAll = [...candidates].sort(() => Math.random() - 0.5);
      const randHires = shuffledAll.slice(0, hireCount);
      const randHighCount = randHires.filter(c => c.isHigh).length;
      const missedHigh = candidates.filter(c => c.isHigh && !c.hasEdu).length;
      return {
        eduHighRate: eduHires.length > 0 ? eduHighCount / eduHires.length : 0,
        randHighRate: randHighCount / randHires.length,
        missedHigh, totalHigh: candidates.filter(c => c.isHigh).length,
        eduHireCount: eduHires.length
      };
    }

    function runHiringSimulation() {
      const total = parseInt(document.getElementById('candidates').value);
      const hire = parseInt(document.getElementById('hireCount').value);
      const highEdu = parseFloat(document.getElementById('highEduRate').value) / 100;
      const lowEdu = parseFloat(document.getElementById('lowEduRate').value) / 100;
      const highRatio = parseFloat(document.getElementById('highRatio').value) / 100;

      const r = simulateHiring(total, hire, highRatio, highEdu, lowEdu);
      document.getElementById('eduHighRate').textContent = (r.eduHighRate * 100).toFixed(1) + '%';
      document.getElementById('randHighRate').textContent = (r.randHighRate * 100).toFixed(1) + '%';
      document.getElementById('improvement').textContent = '+' + ((r.eduHighRate - r.randHighRate) * 100).toFixed(1) + '%';
      document.getElementById('missedTalent').textContent = r.missedHigh + '/' + r.totalHigh;

      hiringChart.config.type = 'bar';
      hiringChart.data.labels = ['å­¦å†ç­›é€‰', 'éšæœºæ‹›è˜', 'å¸‚åœºåŸºå‡†'];
      hiringChart.data.datasets = [{
        label: 'å½•ç”¨è€…ä¸­é«˜èƒ½åŠ›å æ¯” (%)',
        data: [r.eduHighRate * 100, r.randHighRate * 100, highRatio * 100],
        backgroundColor: ['rgba(68,255,68,0.6)', 'rgba(255,107,107,0.6)', 'rgba(255,215,0,0.3)'],
        borderColor: ['#44ff44', '#ff6b6b', '#ffd700'], borderWidth: 1
      }];
      hiringChart.options.scales = {
        x: { ticks: { color: '#b0b0b0' }, grid: { color: 'rgba(255,255,255,0.1)' } },
        y: { ticks: { color: '#b0b0b0' }, grid: { color: 'rgba(255,255,255,0.1)' },
             title: { display: true, text: 'é«˜èƒ½åŠ›è€…å æ¯” (%)', color: '#b0b0b0' }, min: 0, max: 100 }
      };
      hiringChart.update();

      document.getElementById('hiringInsight').textContent =
        'å­¦å†ç­›é€‰åï¼Œå½•ç”¨è€…ä¸­é«˜èƒ½åŠ›å æ¯”' + (r.eduHighRate*100).toFixed(1) + '%ï¼Œæ¯”éšæœºæ‹›è˜çš„' + (r.randHighRate*100).toFixed(1) + '%é«˜å‡º' +
        ((r.eduHighRate - r.randHighRate)*100).toFixed(1) + 'ä¸ªç™¾åˆ†ç‚¹ã€‚ä½†ä»£ä»·æ˜¯' + r.missedHigh + 'ä¸ªæœ‰èƒ½åŠ›ä½†æ²¡å­¦å†çš„äººè¢«ç­›æ‰äº†ï¼ˆå å…¨éƒ¨é«˜èƒ½åŠ›è€…çš„' +
        (r.missedHigh/r.totalHigh*100).toFixed(1) + '%ï¼‰ã€‚è¿™å°±æ˜¯å­¦å†ç­›é€‰çš„æœ¬è´¨ï¼šæé«˜å¹³å‡è´¨é‡ï¼Œä½†ç‰ºç‰²éƒ¨åˆ†äººæ‰ã€‚';
    }

    function runHiringBatch() {
      const total = parseInt(document.getElementById('candidates').value);
      const hire = parseInt(document.getElementById('hireCount').value);
      const highEdu = parseFloat(document.getElementById('highEduRate').value) / 100;
      const lowEdu = parseFloat(document.getElementById('lowEduRate').value) / 100;
      const highRatio = parseFloat(document.getElementById('highRatio').value) / 100;

      const eduRates = [], randRates = [];
      for (let i = 0; i < 1000; i++) {
        const r = simulateHiring(total, hire, highRatio, highEdu, lowEdu);
        eduRates.push(r.eduHighRate * 100);
        randRates.push(r.randHighRate * 100);
      }
      const step = 5;
      const bins = [];
      for (let v = 0; v <= 100; v += step) bins.push(v);
      function hist(data) {
        const counts = new Array(bins.length - 1).fill(0);
        data.forEach(v => { counts[Math.min(Math.floor(v / step), counts.length - 1)]++; });
        return counts;
      }
      hiringChart.config.type = 'bar';
      hiringChart.data.labels = bins.slice(0, -1).map(v => v + '-' + (v + step) + '%');
      hiringChart.data.datasets = [
        { label: 'å­¦å†ç­›é€‰', data: hist(eduRates), backgroundColor: 'rgba(68,255,68,0.5)', borderColor: '#44ff44', borderWidth: 1 },
        { label: 'éšæœºæ‹›è˜', data: hist(randRates), backgroundColor: 'rgba(255,107,107,0.5)', borderColor: '#ff6b6b', borderWidth: 1 }
      ];
      hiringChart.options.scales = {
        x: { ticks: { color: '#b0b0b0' }, grid: { color: 'rgba(255,255,255,0.1)' },
             title: { display: true, text: 'é«˜èƒ½åŠ›è€…å æ¯”', color: '#b0b0b0' } },
        y: { ticks: { color: '#b0b0b0' }, grid: { color: 'rgba(255,255,255,0.1)' },
             title: { display: true, text: 'æ¬¡æ•°ï¼ˆå…±1000è½®ï¼‰', color: '#b0b0b0' } }
      };
      hiringChart.update();

      const avgEdu = (eduRates.reduce((s,v) => s+v, 0) / 1000).toFixed(1);
      const avgRand = (randRates.reduce((s,v) => s+v, 0) / 1000).toFixed(1);
      document.getElementById('eduHighRate').textContent = avgEdu + '%';
      document.getElementById('randHighRate').textContent = avgRand + '%';
      document.getElementById('improvement').textContent = '+' + (avgEdu - avgRand).toFixed(1) + '%';
      document.getElementById('hiringInsight').textContent =
        '1000æ¬¡æ¨¡æ‹Ÿï¼šå­¦å†ç­›é€‰å¹³å‡å½•åˆ°' + avgEdu + '%é«˜èƒ½åŠ›è€…ï¼Œéšæœºæ‹›è˜åªæœ‰' + avgRand + '%ã€‚' +
        'å­¦å†ä¸å®Œç¾ï¼Œä½†åœ¨å¤§è§„æ¨¡æ‹›è˜ä¸­ç¡®å®æ˜¯ä¸ªæœ‰æ•ˆçš„æ¦‚ç‡å·¥å…·ã€‚';
    }

    // ========== æ¨¡å—å››ï¼šå­¦å†é€šèƒ€ ==========
    function runInflationSim() {
      const popularity = parseFloat(document.getElementById('eduPopularity').value) / 100;
      const highRatio = parseFloat(document.getElementById('highRatio').value) / 100;
      const points = [];
      for (let pop = 0.1; pop <= 0.95; pop += 0.05) {
        const highEdu = Math.min(0.95, pop + (1 - pop) * 0.7);
        const lowEdu = Math.max(0.05, pop - highRatio * (highEdu - pop) / (1 - highRatio));
        const pEdu = highRatio * highEdu + (1 - highRatio) * lowEdu;
        const precision = pEdu > 0 ? (highRatio * highEdu / pEdu) : highRatio;
        points.push({ pop: (pop * 100).toFixed(0), precision: precision * 100, baseline: highRatio * 100 });
      }
      inflationChart.data.labels = points.map(p => p.pop + '%');
      inflationChart.data.datasets = [
        { label: 'å­¦å†ç­›é€‰ç²¾åº¦', data: points.map(p => p.precision), borderColor: '#ffd700',
          backgroundColor: 'rgba(255,215,0,0.1)', tension: 0.3, fill: true },
        { label: 'æ— ç­›é€‰åŸºå‡†', data: points.map(p => p.baseline), borderColor: 'rgba(255,255,255,0.3)',
          borderDash: [5, 5], pointRadius: 0 }
      ];
      inflationChart.options.scales = {
        x: { ticks: { color: '#b0b0b0' }, grid: { color: 'rgba(255,255,255,0.1)' },
             title: { display: true, text: 'å­¦å†æ™®åŠç‡', color: '#b0b0b0' } },
        y: { ticks: { color: '#b0b0b0' }, grid: { color: 'rgba(255,255,255,0.1)' },
             title: { display: true, text: 'ç²¾åº¦ (%)', color: '#b0b0b0' }, min: 0, max: 100 }
      };
      inflationChart.update();

      const currentPrecision = points.find(p => Math.abs(p.pop - popularity * 100) < 3);
      if (currentPrecision) {
        document.getElementById('inflationInsight').textContent =
          'å½“å­¦å†æ™®åŠç‡ä¸º' + (popularity*100).toFixed(0) + '%æ—¶ï¼Œæœ‰å­¦å†è€…ä¸­é«˜èƒ½åŠ›å æ¯”çº¦' + currentPrecision.precision.toFixed(1) + '%' +
          'ï¼ˆæ— ç­›é€‰åŸºå‡†ä¸º' + (highRatio*100).toFixed(0) + '%ï¼‰ã€‚' +
          (currentPrecision.precision - highRatio * 100 < 10 ?
            'ç­›é€‰ç²¾åº¦å·²ç»å¾ˆä½äº†ï¼Œå­¦å†å‡ ä¹å¤±å»äº†åŒºåˆ†èƒ½åŠ›ã€‚ä¼ä¸šä¼šè½¬å‘æ›´ç¨€ç¼ºçš„ä¿¡å·ï¼ˆåæ ¡ã€ç ”ç©¶ç”Ÿã€å®ä¹ ç»å†ç­‰ï¼‰ã€‚' :
            'å­¦å†ä»ç„¶æœ‰ä¸€å®šçš„ç­›é€‰ä»·å€¼ï¼Œä½†éšç€æ™®åŠç‡ä¸Šå‡ï¼Œè¿™ä¸ªä¼˜åŠ¿åœ¨ç¼©å°ã€‚');
      }
    }

    window.onload = function() { initCharts(); };
  </script>
</body>
</html>
