<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è’™æéœå°”é—®é¢˜æ¨¡æ‹Ÿå™¨ - æ¢é—¨çœŸçš„èƒ½æé«˜ä¸­å¥–ç‡å—ï¼Ÿ</title>
  <script src="../components/header.js" defer></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: 'PingFang SC', 'Microsoft YaHei', -apple-system, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      min-height: 100vh;
      color: #e4e4e4;
      padding: 30px 20px;
    }

    .container { max-width: 900px; margin: 0 auto; }

    .header { text-align: center; margin: 20px 0 40px; }
    .header h1 {
      font-size: 2.2rem;
      font-weight: 700;
      background: linear-gradient(90deg, #ffd700, #ff6b6b, #ffd700);
      background-size: 200% 100%;
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shimmer 3s ease infinite;
    }
    @keyframes shimmer {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    .header p { color: rgba(255,255,255,0.6); margin-top: 12px; font-size: 15px; line-height: 1.6; }

    /* æ¸¸æˆåŒºåŸŸ */
    .game-section {
      background: rgba(255,255,255,0.03);
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.1);
      padding: 30px;
      margin-bottom: 30px;
    }
    .game-title {
      text-align: center;
      color: #ffd700;
      font-size: 18px;
      margin-bottom: 25px;
    }

    .doors-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .door {
      width: 140px;
      height: 200px;
      background: linear-gradient(180deg, #8B4513 0%, #654321 100%);
      border-radius: 10px 10px 0 0;
      position: relative;
      cursor: pointer;
      transition: all 0.3s;
      border: 3px solid #5D3A1A;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    .door::before {
      content: '';
      position: absolute;
      top: 50%;
      right: 15px;
      width: 12px;
      height: 12px;
      background: #ffd700;
      border-radius: 50%;
      transform: translateY(-50%);
      box-shadow: 0 0 10px rgba(255,215,0,0.5);
    }
    .door-number {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 24px;
      font-weight: 700;
      color: #ffd700;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    .door:hover:not(.disabled) {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(0,0,0,0.4);
    }
    .door.selected {
      border-color: #ffd700;
      box-shadow: 0 0 30px rgba(255,215,0,0.4);
    }
    .door.opened {
      background: linear-gradient(180deg, #4a4a4a 0%, #2a2a2a 100%);
      border-color: #666;
    }
    .door.disabled { cursor: not-allowed; opacity: 0.7; }

    .door-content {
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 50px;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .door.opened .door-content { opacity: 1; }

    .game-message {
      text-align: center;
      font-size: 16px;
      color: rgba(255,255,255,0.8);
      min-height: 50px;
      line-height: 1.6;
    }
    .game-message .highlight { color: #ffd700; font-weight: 600; }

    .game-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 12px 30px;
      font-size: 15px;
      font-weight: 600;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s;
    }
    .btn-primary {
      background: linear-gradient(135deg, #ffd700, #ff6b6b);
      color: #1a1a2e;
    }
    .btn-secondary {
      background: rgba(255,255,255,0.1);
      color: white;
      border: 1px solid rgba(255,255,255,0.2);
    }
    .btn:hover:not(:disabled) { transform: translateY(-2px); }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; }

    /* ç»Ÿè®¡åŒºåŸŸ */
    .stats-section {
      background: rgba(255,255,255,0.03);
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.1);
      padding: 30px;
      margin-bottom: 30px;
    }
    .stats-title {
      text-align: center;
      color: rgba(255,255,255,0.6);
      font-size: 14px;
      margin-bottom: 25px;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }
    @media (max-width: 600px) {
      .stats-grid { grid-template-columns: 1fr; }
    }

    .stat-card {
      background: rgba(0,0,0,0.2);
      border-radius: 15px;
      padding: 25px;
      text-align: center;
    }
    .stat-card.switch { border-left: 4px solid #4ade80; }
    .stat-card.stay { border-left: 4px solid #f472b6; }

    .stat-label { color: rgba(255,255,255,0.5); font-size: 13px; margin-bottom: 10px; }
    .stat-value { font-size: 3rem; font-weight: 700; margin-bottom: 5px; }
    .stat-card.switch .stat-value { color: #4ade80; }
    .stat-card.stay .stat-value { color: #f472b6; }
    .stat-detail { font-size: 13px; color: rgba(255,255,255,0.4); }

    /* è¿›åº¦æ¡å¯¹æ¯” */
    .compare-section {
      background: rgba(255,255,255,0.03);
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.1);
      padding: 30px;
      margin-bottom: 30px;
    }
    .compare-title {
      text-align: center;
      color: rgba(255,255,255,0.6);
      font-size: 14px;
      margin-bottom: 20px;
    }
    .compare-bar {
      margin-bottom: 15px;
    }
    .compare-label {
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      margin-bottom: 8px;
    }
    .compare-label span:first-child { color: rgba(255,255,255,0.6); }
    .compare-label span:last-child { font-weight: 600; }
    .compare-label.switch span:last-child { color: #4ade80; }
    .compare-label.stay span:last-child { color: #f472b6; }

    .bar-bg {
      height: 30px;
      background: rgba(0,0,0,0.3);
      border-radius: 15px;
      overflow: hidden;
    }
    .bar-fill {
      height: 100%;
      border-radius: 15px;
      transition: width 0.5s ease;
      display: flex;
      align-items: center;
      padding-left: 15px;
      font-size: 13px;
      font-weight: 600;
    }
    .bar-fill.switch { background: linear-gradient(90deg, #4ade80, #22d3ee); }
    .bar-fill.stay { background: linear-gradient(90deg, #f472b6, #fb923c); }

    /* æ‰¹é‡æ¨¡æ‹Ÿ */
    .simulation-section {
      background: linear-gradient(135deg, rgba(74,222,128,0.1), rgba(34,211,238,0.1));
      border-radius: 20px;
      border: 1px solid rgba(74,222,128,0.2);
      padding: 30px;
      margin-bottom: 30px;
    }
    .simulation-title {
      color: #4ade80;
      font-size: 16px;
      margin-bottom: 20px;
      text-align: center;
    }
    .simulation-controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }
    .sim-input {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .sim-input label { color: rgba(255,255,255,0.6); font-size: 14px; }
    .sim-input select {
      background: rgba(0,0,0,0.3);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 8px;
      padding: 10px 15px;
      color: white;
      font-size: 14px;
    }
    .sim-input select option { background: #1a1a2e; }

    /* è§£é‡ŠåŒºåŸŸ */
    .explanation {
      background: rgba(255,255,255,0.03);
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.1);
      padding: 30px;
    }
    .explanation h3 {
      color: #ffd700;
      font-size: 16px;
      margin-bottom: 20px;
    }
    .explanation p {
      color: rgba(255,255,255,0.7);
      line-height: 1.8;
      margin-bottom: 15px;
      font-size: 14px;
    }
    .explanation .key-point {
      background: rgba(255,215,0,0.1);
      border-left: 3px solid #ffd700;
      padding: 15px;
      margin: 20px 0;
      border-radius: 0 10px 10px 0;
    }
    .explanation .key-point strong { color: #ffd700; }

    .probability-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      font-size: 14px;
    }
    .probability-table th, .probability-table td {
      padding: 12px;
      text-align: center;
      border: 1px solid rgba(255,255,255,0.1);
    }
    .probability-table th {
      background: rgba(255,215,0,0.1);
      color: #ffd700;
    }
    .probability-table td { color: rgba(255,255,255,0.7); }
    .probability-table .win { color: #4ade80; font-weight: 600; }
    .probability-table .lose { color: #f472b6; }

    @media (max-width: 500px) {
      .door { width: 100px; height: 150px; }
      .door-content { font-size: 35px; }
      .header h1 { font-size: 1.6rem; }
    }
  </style>
</head>
<body>

<div class="container">
  <div class="header">
    <h1>ğŸšª è’™æéœå°”é—®é¢˜æ¨¡æ‹Ÿå™¨</h1>
    <p>ä¸‰æ‰‡é—¨åæœ‰ä¸€è¾†è½¦å’Œä¸¤åªç¾Šã€‚ä½ é€‰ä¸€æ‰‡é—¨ï¼Œä¸»æŒäººæ‰“å¼€å¦ä¸€æ‰‡æœ‰ç¾Šçš„é—¨ã€‚<br>ç°åœ¨ï¼Œä½ è¦æ¢é—¨å—ï¼Ÿ</p>
  </div>

  <!-- äº’åŠ¨æ¸¸æˆ -->
  <div class="game-section">
    <div class="game-title">ğŸ® äº²è‡ªä½“éªŒä¸€å±€</div>
    <div class="doors-container">
      <div class="door" data-door="1" onclick="selectDoor(1)">
        <div class="door-number">1</div>
        <div class="door-content" id="content1"></div>
      </div>
      <div class="door" data-door="2" onclick="selectDoor(2)">
        <div class="door-number">2</div>
        <div class="door-content" id="content2"></div>
      </div>
      <div class="door" data-door="3" onclick="selectDoor(3)">
        <div class="door-number">3</div>
        <div class="door-content" id="content3"></div>
      </div>
    </div>
    <div class="game-message" id="gameMessage">ğŸ‘† è¯·é€‰æ‹©ä¸€æ‰‡é—¨</div>
    <div class="game-buttons" id="gameButtons"></div>
  </div>

  <!-- ç»Ÿè®¡æ•°æ® -->
  <div class="stats-section">
    <div class="stats-title">ğŸ“Š ä½ çš„æ¸¸æˆç»Ÿè®¡</div>
    <div class="stats-grid">
      <div class="stat-card switch">
        <div class="stat-label">æ¢é—¨ç­–ç•¥èƒœç‡</div>
        <div class="stat-value" id="switchRate">-</div>
        <div class="stat-detail">èƒœ <span id="switchWin">0</span> / å…± <span id="switchTotal">0</span> å±€</div>
      </div>
      <div class="stat-card stay">
        <div class="stat-label">ä¸æ¢ç­–ç•¥èƒœç‡</div>
        <div class="stat-value" id="stayRate">-</div>
        <div class="stat-detail">èƒœ <span id="stayWin">0</span> / å…± <span id="stayTotal">0</span> å±€</div>
      </div>
    </div>
  </div>

  <!-- å¯¹æ¯”æ¡ -->
  <div class="compare-section">
    <div class="compare-title">ğŸ“ˆ èƒœç‡å¯¹æ¯”</div>
    <div class="compare-bar">
      <div class="compare-label switch">
        <span>æ¢é—¨</span>
        <span id="switchBarLabel">0%</span>
      </div>
      <div class="bar-bg">
        <div class="bar-fill switch" id="switchBar" style="width: 0%"></div>
      </div>
    </div>
    <div class="compare-bar">
      <div class="compare-label stay">
        <span>ä¸æ¢</span>
        <span id="stayBarLabel">0%</span>
      </div>
      <div class="bar-bg">
        <div class="bar-fill stay" id="stayBar" style="width: 0%"></div>
      </div>
    </div>
  </div>

  <!-- æ‰¹é‡æ¨¡æ‹Ÿ -->
  <div class="simulation-section">
    <div class="simulation-title">ğŸš€ ä¸ä¿¡ï¼Ÿè®©ç”µè„‘è·‘ 1000 æ¬¡ç»™ä½ çœ‹</div>
    <div class="simulation-controls">
      <div class="sim-input">
        <label>æ¨¡æ‹Ÿæ¬¡æ•°ï¼š</label>
        <select id="simCount">
          <option value="100">100 æ¬¡</option>
          <option value="1000" selected>1000 æ¬¡</option>
          <option value="10000">10000 æ¬¡</option>
        </select>
      </div>
      <button class="btn btn-primary" onclick="runSimulation()">âš¡ å¼€å§‹æ¨¡æ‹Ÿ</button>
    </div>
  </div>

  <!-- åŸç†è§£é‡Š -->
  <div class="explanation">
    <h3>ğŸ¤” ä¸ºä»€ä¹ˆæ¢é—¨èƒ½æé«˜èƒœç‡ï¼Ÿ</h3>
    
    <p>å¾ˆå¤šäººçš„ç›´è§‰æ˜¯ï¼šå‰©ä¸‹ä¸¤æ‰‡é—¨ï¼Œæ¦‚ç‡åº”è¯¥æ˜¯ 50/50ã€‚ä½†è¿™æ˜¯é”™çš„ã€‚</p>
    
    <div class="key-point">
      <strong>å…³é”®ç‚¹ï¼š</strong>ä¸»æŒäººä¸æ˜¯éšæœºå¼€é—¨çš„ï¼Œä»–çŸ¥é“å“ªæ‰‡é—¨åé¢æ˜¯ç¾Šï¼Œä»–æ°¸è¿œåªä¼šæ‰“å¼€æœ‰ç¾Šçš„é—¨ã€‚
    </div>
    
    <p>æˆ‘ä»¬æ¥ç©·ä¸¾æ‰€æœ‰æƒ…å†µï¼š</p>
    
    <table class="probability-table">
      <tr>
        <th>è½¦åœ¨å“ª</th>
        <th>ä½ é€‰çš„</th>
        <th>ä¸»æŒäººå¼€</th>
        <th>ä¸æ¢ç»“æœ</th>
        <th>æ¢é—¨ç»“æœ</th>
      </tr>
      <tr>
        <td>é—¨1</td>
        <td>é—¨1</td>
        <td>é—¨2æˆ–3</td>
        <td class="win">ğŸš— èµ¢</td>
        <td class="lose">ğŸ è¾“</td>
      </tr>
      <tr>
        <td>é—¨1</td>
        <td>é—¨2</td>
        <td>é—¨3</td>
        <td class="lose">ğŸ è¾“</td>
        <td class="win">ğŸš— èµ¢</td>
      </tr>
      <tr>
        <td>é—¨1</td>
        <td>é—¨3</td>
        <td>é—¨2</td>
        <td class="lose">ğŸ è¾“</td>
        <td class="win">ğŸš— èµ¢</td>
      </tr>
    </table>
    
    <p>ä¸‰ç§ç­‰æ¦‚ç‡æƒ…å†µä¸­ï¼š</p>
    <p>â€¢ <strong>ä¸æ¢</strong>ï¼šåªæœ‰ 1 ç§æƒ…å†µèµ¢ â†’ èƒœç‡ <span style="color:#f472b6">1/3 â‰ˆ 33.3%</span></p>
    <p>â€¢ <strong>æ¢é—¨</strong>ï¼šæœ‰ 2 ç§æƒ…å†µèµ¢ â†’ èƒœç‡ <span style="color:#4ade80">2/3 â‰ˆ 66.7%</span></p>
    
    <div class="key-point">
      <strong>æ¢ä¸€ç§ç†è§£æ–¹å¼ï¼š</strong><br>
      ä½ ç¬¬ä¸€æ¬¡é€‰ä¸­è½¦çš„æ¦‚ç‡æ˜¯ 1/3ï¼Œé€‰ä¸­ç¾Šçš„æ¦‚ç‡æ˜¯ 2/3ã€‚<br>
      å¦‚æœä½ é€‰ä¸­äº†ç¾Šï¼ˆ2/3 æ¦‚ç‡ï¼‰ï¼Œæ¢é—¨å¿…èµ¢ã€‚<br>
      å¦‚æœä½ é€‰ä¸­äº†è½¦ï¼ˆ1/3 æ¦‚ç‡ï¼‰ï¼Œæ¢é—¨å¿…è¾“ã€‚<br>
      æ‰€ä»¥æ¢é—¨çš„èƒœç‡å°±æ˜¯ 2/3ã€‚
    </div>
    
    <p>è¿™ä¸ªé—®é¢˜1990å¹´åœ¨ã€ŠParadeã€‹æ‚å¿—å‘è¡¨åï¼Œå¼•å‘äº†å·¨å¤§äº‰è®®ã€‚æ®è¯´æœ‰è¿‘1000ååšå£«å†™ä¿¡è¯´ç­”æ¡ˆæ˜¯é”™çš„ã€‚ä½†æ•°å­¦ä¸ä¼šéª—äººâ€”â€”è·‘ä¸€ä¸‡æ¬¡æ¨¡æ‹Ÿï¼Œç»“æœå°±åœ¨é‚£é‡Œã€‚</p>
  </div>
</div>

<script>
// æ¸¸æˆçŠ¶æ€
let gameState = {
  carPosition: 0,
  playerChoice: 0,
  openedDoor: 0,
  phase: 'choose', // choose, decide, result
};

// ç»Ÿè®¡æ•°æ®
let stats = {
  switchWin: 0,
  switchTotal: 0,
  stayWin: 0,
  stayTotal: 0
};

function initGame() {
  // éšæœºæ”¾ç½®è½¦ï¼ˆ1-3ï¼‰
  gameState.carPosition = Math.floor(Math.random() * 3) + 1;
  gameState.playerChoice = 0;
  gameState.openedDoor = 0;
  gameState.phase = 'choose';
  
  // é‡ç½®é—¨çš„æ˜¾ç¤º
  document.querySelectorAll('.door').forEach(door => {
    door.classList.remove('selected', 'opened', 'disabled');
  });
  document.getElementById('content1').textContent = '';
  document.getElementById('content2').textContent = '';
  document.getElementById('content3').textContent = '';
  
  document.getElementById('gameMessage').innerHTML = 'ğŸ‘† è¯·é€‰æ‹©ä¸€æ‰‡é—¨';
  document.getElementById('gameButtons').innerHTML = '';
}

function selectDoor(doorNum) {
  if (gameState.phase !== 'choose') return;
  
  gameState.playerChoice = doorNum;
  gameState.phase = 'decide';
  
  // é«˜äº®é€‰ä¸­çš„é—¨
  document.querySelectorAll('.door').forEach(door => {
    door.classList.remove('selected');
  });
  document.querySelector(`[data-door="${doorNum}"]`).classList.add('selected');
  
  // ä¸»æŒäººæ‰“å¼€ä¸€æ‰‡æœ‰ç¾Šçš„é—¨
  let doorsToOpen = [1, 2, 3].filter(d => d !== doorNum && d !== gameState.carPosition);
  gameState.openedDoor = doorsToOpen[Math.floor(Math.random() * doorsToOpen.length)];
  
  // æ˜¾ç¤ºæ‰“å¼€çš„é—¨
  setTimeout(() => {
    const openedDoorEl = document.querySelector(`[data-door="${gameState.openedDoor}"]`);
    openedDoorEl.classList.add('opened', 'disabled');
    document.getElementById(`content${gameState.openedDoor}`).textContent = 'ğŸ';
    
    // æ‰¾åˆ°å‰©ä¸‹çš„é—¨
    const remainingDoor = [1, 2, 3].find(d => d !== doorNum && d !== gameState.openedDoor);
    
    document.getElementById('gameMessage').innerHTML = 
      `ä¸»æŒäººæ‰“å¼€äº† <span class="highlight">${gameState.openedDoor} å·é—¨</span>ï¼Œåé¢æ˜¯ä¸€åªç¾Š ğŸ<br>` +
      `ä½ è¦æ¢åˆ° <span class="highlight">${remainingDoor} å·é—¨</span> å—ï¼Ÿ`;
    
    document.getElementById('gameButtons').innerHTML = `
      <button class="btn btn-primary" onclick="makeDecision(true)">ğŸ”„ æ¢é—¨</button>
      <button class="btn btn-secondary" onclick="makeDecision(false)">âœ‹ ä¸æ¢</button>
    `;
  }, 500);
}

function makeDecision(switchDoor) {
  gameState.phase = 'result';
  
  let finalChoice;
  if (switchDoor) {
    finalChoice = [1, 2, 3].find(d => d !== gameState.playerChoice && d !== gameState.openedDoor);
    stats.switchTotal++;
  } else {
    finalChoice = gameState.playerChoice;
    stats.stayTotal++;
  }
  
  const won = finalChoice === gameState.carPosition;
  
  if (switchDoor && won) stats.switchWin++;
  if (!switchDoor && won) stats.stayWin++;
  
  // æ›´æ–°é—¨çš„é€‰ä¸­çŠ¶æ€
  document.querySelectorAll('.door').forEach(door => {
    door.classList.remove('selected');
    door.classList.add('disabled');
  });
  document.querySelector(`[data-door="${finalChoice}"]`).classList.add('selected');
  
  // æ˜¾ç¤ºæ‰€æœ‰é—¨åé¢çš„å†…å®¹
  setTimeout(() => {
    for (let i = 1; i <= 3; i++) {
      const content = i === gameState.carPosition ? 'ğŸš—' : 'ğŸ';
      document.getElementById(`content${i}`).textContent = content;
      document.querySelector(`[data-door="${i}"]`).classList.add('opened');
    }
    
    const action = switchDoor ? 'æ¢é—¨' : 'ä¸æ¢';
    if (won) {
      document.getElementById('gameMessage').innerHTML = 
        `ğŸ‰ <span class="highlight">æ­å–œï¼ä½ ${action}èµ¢å¾—äº†æ±½è½¦ï¼</span>`;
    } else {
      document.getElementById('gameMessage').innerHTML = 
        `ğŸ˜… å¾ˆé—æ†¾ï¼Œä½ ${action}é€‰åˆ°äº†ç¾Šã€‚è½¦åœ¨ ${gameState.carPosition} å·é—¨åé¢ã€‚`;
    }
    
    document.getElementById('gameButtons').innerHTML = `
      <button class="btn btn-primary" onclick="initGame()">ğŸ”„ å†æ¥ä¸€å±€</button>
    `;
    
    updateStats();
  }, 300);
}

function updateStats() {
  const switchRate = stats.switchTotal > 0 ? (stats.switchWin / stats.switchTotal * 100).toFixed(1) : '-';
  const stayRate = stats.stayTotal > 0 ? (stats.stayWin / stats.stayTotal * 100).toFixed(1) : '-';
  
  document.getElementById('switchRate').textContent = switchRate === '-' ? '-' : switchRate + '%';
  document.getElementById('stayRate').textContent = stayRate === '-' ? '-' : stayRate + '%';
  document.getElementById('switchWin').textContent = stats.switchWin;
  document.getElementById('switchTotal').textContent = stats.switchTotal;
  document.getElementById('stayWin').textContent = stats.stayWin;
  document.getElementById('stayTotal').textContent = stats.stayTotal;
  
  // æ›´æ–°å¯¹æ¯”æ¡
  const switchPct = stats.switchTotal > 0 ? (stats.switchWin / stats.switchTotal * 100) : 0;
  const stayPct = stats.stayTotal > 0 ? (stats.stayWin / stats.stayTotal * 100) : 0;
  
  document.getElementById('switchBar').style.width = switchPct + '%';
  document.getElementById('switchBarLabel').textContent = switchPct.toFixed(1) + '%';
  document.getElementById('stayBar').style.width = stayPct + '%';
  document.getElementById('stayBarLabel').textContent = stayPct.toFixed(1) + '%';
}

function runSimulation() {
  const count = parseInt(document.getElementById('simCount').value);
  
  let switchWins = 0;
  let stayWins = 0;
  
  for (let i = 0; i < count; i++) {
    // éšæœºæ”¾è½¦
    const carPos = Math.floor(Math.random() * 3) + 1;
    // éšæœºé€‰é—¨
    const playerChoice = Math.floor(Math.random() * 3) + 1;
    // ä¸»æŒäººå¼€é—¨ï¼ˆä¸æ˜¯ç©å®¶é€‰çš„ï¼Œä¹Ÿä¸æ˜¯è½¦çš„ä½ç½®ï¼‰
    const doorsToOpen = [1, 2, 3].filter(d => d !== playerChoice && d !== carPos);
    const openedDoor = doorsToOpen[Math.floor(Math.random() * doorsToOpen.length)];
    // æ¢é—¨åçš„é€‰æ‹©
    const switchChoice = [1, 2, 3].find(d => d !== playerChoice && d !== openedDoor);
    
    // ç»Ÿè®¡ç»“æœ
    if (switchChoice === carPos) switchWins++;
    if (playerChoice === carPos) stayWins++;
  }
  
  // æ›´æ–°ç»Ÿè®¡ï¼ˆç´¯åŠ åˆ°ç°æœ‰ç»Ÿè®¡ï¼‰
  stats.switchWin += switchWins;
  stats.switchTotal += count;
  stats.stayWin += stayWins;
  stats.stayTotal += count;
  
  updateStats();
  
  // æ˜¾ç¤ºæœ¬æ¬¡æ¨¡æ‹Ÿç»“æœ
  const switchRate = (switchWins / count * 100).toFixed(2);
  const stayRate = (stayWins / count * 100).toFixed(2);
  
  document.getElementById('gameMessage').innerHTML = 
    `ğŸ² æ¨¡æ‹Ÿ ${count} æ¬¡å®Œæˆï¼<br>` +
    `æ¢é—¨èƒœç‡: <span class="highlight">${switchRate}%</span> | ` +
    `ä¸æ¢èƒœç‡: <span class="highlight">${stayRate}%</span>`;
}

// åˆå§‹åŒ–æ¸¸æˆ
initGame();
</script>

</body>
</html>
