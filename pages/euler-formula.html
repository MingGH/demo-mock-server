<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ¬§æ‹‰å…¬å¼ - æ•°å­¦ä¸­æœ€ç¾ä¸½çš„å…¬å¼</title>
  <script src="../components/header.js" defer></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'PingFang SC', 'Microsoft YaHei', -apple-system, sans-serif;
      background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3e 50%, #0f2847 100%);
      min-height: 100vh;
      color: #e4e4e4;
      padding: 30px 20px;
      overflow-x: hidden;
    }
    .container { max-width: 1100px; margin: 0 auto; }
    .header { text-align: center; margin: 20px 0 50px; }
    .header h1 {
      font-size: 2.5rem;
      font-weight: 700;
      background: linear-gradient(90deg, #ffd700, #ffaa00, #ffd700);
      background-size: 200% 100%;
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shimmer 3s ease infinite;
    }
    @keyframes shimmer {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    .header p { color: rgba(255,255,255,0.5); margin-top: 15px; font-size: 16px; }

    /* æ ¸å¿ƒå…¬å¼å±•ç¤º */
    .formula-hero {
      background: radial-gradient(ellipse at center, rgba(255,215,0,0.1) 0%, transparent 70%);
      border-radius: 30px;
      padding: 60px 40px;
      text-align: center;
      margin-bottom: 40px;
      position: relative;
      overflow: hidden;
    }
    .formula-hero::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: conic-gradient(from 0deg, transparent, rgba(255,215,0,0.03), transparent 30%);
      animation: rotate 20s linear infinite;
    }
    @keyframes rotate {
      100% { transform: rotate(360deg); }
    }
    .main-formula {
      font-size: 4rem;
      font-weight: 300;
      color: #ffd700;
      text-shadow: 0 0 30px rgba(255,215,0,0.5);
      position: relative;
      z-index: 1;
      font-family: 'Times New Roman', serif;
      letter-spacing: 8px;
    }
    .formula-subtitle {
      color: rgba(255,255,255,0.6);
      margin-top: 20px;
      font-size: 18px;
      position: relative;
      z-index: 1;
    }
    .formula-quote {
      color: rgba(255,255,255,0.4);
      font-style: italic;
      margin-top: 15px;
      font-size: 14px;
      position: relative;
      z-index: 1;
    }

    /* äº”å¤§å¸¸æ•°å¡ç‰‡ */
    .constants-section {
      margin-bottom: 40px;
    }
    .section-title {
      color: #ffd700;
      font-size: 20px;
      margin-bottom: 25px;
      padding-left: 15px;
      border-left: 4px solid #ffd700;
    }
    .constants-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 15px;
    }
    .constant-card {
      background: rgba(255,255,255,0.03);
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.08);
      padding: 25px 15px;
      text-align: center;
      transition: all 0.4s;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }
    .constant-card:hover {
      transform: translateY(-8px);
      border-color: rgba(255,215,0,0.3);
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
    }
    .constant-card.active {
      border-color: #ffd700;
      background: rgba(255,215,0,0.1);
    }
    .constant-symbol {
      font-size: 3rem;
      font-family: 'Times New Roman', serif;
      font-style: italic;
      margin-bottom: 10px;
    }
    .constant-card:nth-child(1) .constant-symbol { color: #4fc3f7; }
    .constant-card:nth-child(2) .constant-symbol { color: #ba68c8; }
    .constant-card:nth-child(3) .constant-symbol { color: #81c784; }
    .constant-card:nth-child(4) .constant-symbol { color: #ffb74d; }
    .constant-card:nth-child(5) .constant-symbol { color: #ef5350; }
    .constant-name { color: rgba(255,255,255,0.7); font-size: 13px; margin-bottom: 5px; }
    .constant-value { color: rgba(255,255,255,0.5); font-size: 12px; font-family: monospace; }

    /* å¤å¹³é¢å¯è§†åŒ– */
    .visualization-section {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 25px;
      margin-bottom: 40px;
    }
    .viz-card {
      background: rgba(255,255,255,0.03);
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.08);
      padding: 25px;
    }
    .viz-card h3 {
      color: #ffd700;
      font-size: 16px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .canvas-container {
      position: relative;
      width: 100%;
      aspect-ratio: 1;
      background: rgba(0,0,0,0.3);
      border-radius: 12px;
      overflow: hidden;
    }
    canvas {
      width: 100%;
      height: 100%;
    }
    
    /* æ§åˆ¶é¢æ¿ */
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-top: 20px;
    }
    .control-group {
      flex: 1;
      min-width: 120px;
    }
    .control-group label {
      display: block;
      color: rgba(255,255,255,0.5);
      font-size: 12px;
      margin-bottom: 8px;
    }
    .control-group input[type="range"] {
      width: 100%;
      height: 6px;
      -webkit-appearance: none;
      background: rgba(255,255,255,0.1);
      border-radius: 3px;
      outline: none;
    }
    .control-group input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 18px;
      height: 18px;
      background: #ffd700;
      border-radius: 50%;
      cursor: pointer;
    }
    .control-value {
      color: #ffd700;
      font-size: 14px;
      font-family: monospace;
      margin-top: 5px;
    }

    /* åŠ¨ç”»æŒ‰é’® */
    .btn-group {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }
    .btn {
      flex: 1;
      padding: 12px 20px;
      font-size: 14px;
      font-weight: 600;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s;
    }
    .btn-primary {
      background: linear-gradient(135deg, #ffd700, #ffaa00);
      color: #1a1a2e;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(255,215,0,0.3);
    }
    .btn-secondary {
      background: rgba(255,255,255,0.1);
      color: white;
      border: 1px solid rgba(255,255,255,0.2);
    }
    .btn-secondary:hover {
      background: rgba(255,255,255,0.15);
    }
    
    /* å…¬å¼æ¨å¯¼ */
    .derivation-section {
      background: rgba(255,255,255,0.03);
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.08);
      padding: 30px;
      margin-bottom: 40px;
    }
    .derivation-step {
      background: rgba(0,0,0,0.2);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 15px;
      border-left: 3px solid #ffd700;
      opacity: 0;
      transform: translateX(-20px);
      transition: all 0.5s;
    }
    .derivation-step.visible {
      opacity: 1;
      transform: translateX(0);
    }
    .step-number {
      display: inline-block;
      width: 28px;
      height: 28px;
      background: #ffd700;
      color: #1a1a2e;
      border-radius: 50%;
      text-align: center;
      line-height: 28px;
      font-weight: 700;
      font-size: 14px;
      margin-right: 12px;
    }
    .step-title {
      color: #ffd700;
      font-size: 16px;
      display: inline;
    }
    .step-content {
      color: rgba(255,255,255,0.7);
      margin-top: 12px;
      padding-left: 40px;
      line-height: 1.8;
    }
    .step-formula {
      font-family: 'Times New Roman', serif;
      font-size: 1.3rem;
      color: #4fc3f7;
      margin: 10px 0;
    }

    /* ç¾å­¦è§£è¯» */
    .beauty-section {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-bottom: 40px;
    }
    .beauty-card {
      background: rgba(255,255,255,0.03);
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.08);
      padding: 25px;
      text-align: center;
      transition: all 0.3s;
    }
    .beauty-card:hover {
      transform: translateY(-5px);
      border-color: rgba(255,215,0,0.3);
    }
    .beauty-icon {
      font-size: 3rem;
      margin-bottom: 15px;
    }
    .beauty-title {
      color: #ffd700;
      font-size: 16px;
      margin-bottom: 10px;
    }
    .beauty-desc {
      color: rgba(255,255,255,0.6);
      font-size: 14px;
      line-height: 1.6;
    }
    
    /* å®æ—¶è®¡ç®—å™¨ */
    .calculator-section {
      background: rgba(255,255,255,0.03);
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.08);
      padding: 30px;
      margin-bottom: 40px;
    }
    .calc-input-group {
      display: flex;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }
    .calc-label {
      color: rgba(255,255,255,0.7);
      font-size: 18px;
      font-family: 'Times New Roman', serif;
    }
    .calc-input {
      width: 100px;
      background: rgba(0,0,0,0.3);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 8px;
      padding: 10px 15px;
      color: #ffd700;
      font-size: 18px;
      font-family: monospace;
      text-align: center;
    }
    .calc-input:focus {
      outline: none;
      border-color: #ffd700;
    }
    .calc-result {
      background: rgba(0,0,0,0.3);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
    }
    .calc-result-formula {
      font-family: 'Times New Roman', serif;
      font-size: 1.5rem;
      color: #4fc3f7;
      margin-bottom: 10px;
    }
    .calc-result-value {
      font-size: 1.2rem;
      color: #ffd700;
      font-family: monospace;
    }

    /* å†å²æ—¶é—´çº¿ */
    .timeline-section {
      position: relative;
      padding-left: 30px;
      margin-bottom: 40px;
    }
    .timeline-section::before {
      content: '';
      position: absolute;
      left: 8px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: linear-gradient(to bottom, #ffd700, rgba(255,215,0,0.2));
    }
    .timeline-item {
      position: relative;
      margin-bottom: 25px;
      padding-left: 25px;
    }
    .timeline-item::before {
      content: '';
      position: absolute;
      left: -26px;
      top: 5px;
      width: 12px;
      height: 12px;
      background: #ffd700;
      border-radius: 50%;
      box-shadow: 0 0 15px rgba(255,215,0,0.5);
    }
    .timeline-year {
      color: #ffd700;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 5px;
    }
    .timeline-content {
      color: rgba(255,255,255,0.7);
      font-size: 14px;
      line-height: 1.6;
    }
    
    /* å“åº”å¼ */
    @media (max-width: 900px) {
      .visualization-section { grid-template-columns: 1fr; }
      .beauty-section { grid-template-columns: 1fr; }
      .constants-grid { grid-template-columns: repeat(3, 1fr); }
    }
    @media (max-width: 600px) {
      .header h1 { font-size: 1.8rem; }
      .main-formula { font-size: 2.5rem; letter-spacing: 4px; }
      .constants-grid { grid-template-columns: repeat(2, 1fr); }
      .constant-symbol { font-size: 2rem; }
    }
  </style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>âœ¨ æ¬§æ‹‰å…¬å¼ï¼šæ•°å­¦ä¸­æœ€ç¾ä¸½çš„å…¬å¼</h1>
    <p>äº”ä¸ªæœ€é‡è¦çš„æ•°å­¦å¸¸æ•°ï¼Œä¸€ä¸ªç­‰å¼ï¼Œæ— é™çš„ç¾</p>
  </div>

  <!-- æ ¸å¿ƒå…¬å¼å±•ç¤º -->
  <div class="formula-hero">
    <div class="main-formula" id="mainFormula">e<sup>iÏ€</sup> + 1 = 0</div>
    <div class="formula-subtitle">æ¬§æ‹‰æ’ç­‰å¼ Â· Euler's Identity</div>
    <div class="formula-quote">"è¿™æ˜¯æ•°å­¦ä¸­æœ€éå‡¡çš„å…¬å¼" â€”â€” ç†æŸ¥å¾·Â·è´¹æ›¼</div>
  </div>

  <!-- äº”å¤§å¸¸æ•° -->
  <div class="constants-section">
    <h2 class="section-title">ğŸ”® äº”å¤§æ•°å­¦å¸¸æ•°çš„ç›¸é‡</h2>
    <div class="constants-grid">
      <div class="constant-card" data-constant="e" onclick="highlightConstant(this)">
        <div class="constant-symbol">e</div>
        <div class="constant-name">è‡ªç„¶å¸¸æ•°</div>
        <div class="constant-value">2.71828...</div>
      </div>
      <div class="constant-card" data-constant="i" onclick="highlightConstant(this)">
        <div class="constant-symbol">i</div>
        <div class="constant-name">è™šæ•°å•ä½</div>
        <div class="constant-value">âˆš(-1)</div>
      </div>
      <div class="constant-card" data-constant="pi" onclick="highlightConstant(this)">
        <div class="constant-symbol">Ï€</div>
        <div class="constant-name">åœ†å‘¨ç‡</div>
        <div class="constant-value">3.14159...</div>
      </div>
      <div class="constant-card" data-constant="1" onclick="highlightConstant(this)">
        <div class="constant-symbol">1</div>
        <div class="constant-name">ä¹˜æ³•å•ä½å…ƒ</div>
        <div class="constant-value">è‡ªç„¶æ•°èµ·ç‚¹</div>
      </div>
      <div class="constant-card" data-constant="0" onclick="highlightConstant(this)">
        <div class="constant-symbol">0</div>
        <div class="constant-name">åŠ æ³•å•ä½å…ƒ</div>
        <div class="constant-value">è™šæ— ä¸å­˜åœ¨</div>
      </div>
    </div>
  </div>

  <!-- å¯è§†åŒ–åŒºåŸŸ -->
  <div class="visualization-section">
    <div class="viz-card">
      <h3>ğŸŒ€ å¤å¹³é¢ä¸Šçš„æ—‹è½¬</h3>
      <div class="canvas-container">
        <canvas id="complexPlane"></canvas>
      </div>
      <div class="controls">
        <div class="control-group">
          <label>è§’åº¦ Î¸</label>
          <input type="range" id="thetaSlider" min="0" max="6.283" step="0.01" value="3.14159">
          <div class="control-value" id="thetaValue">Î¸ = Ï€</div>
        </div>
      </div>
      <div class="btn-group">
        <button class="btn btn-primary" onclick="animateRotation()">â–¶ æ’­æ”¾æ—‹è½¬åŠ¨ç”»</button>
        <button class="btn btn-secondary" onclick="resetToPI()">é‡ç½®åˆ° Ï€</button>
      </div>
    </div>
    
    <div class="viz-card">
      <h3>ğŸ“ˆ e^(iÎ¸) çš„è½¨è¿¹</h3>
      <div class="canvas-container">
        <canvas id="spiralCanvas"></canvas>
      </div>
      <div class="controls">
        <div class="control-group">
          <label>å®éƒ¨ç³»æ•°</label>
          <input type="range" id="realCoef" min="-1" max="1" step="0.1" value="0">
          <div class="control-value" id="realValue">a = 0</div>
        </div>
      </div>
      <div class="btn-group">
        <button class="btn btn-primary" onclick="drawSpiral()">ç»˜åˆ¶èºæ—‹</button>
        <button class="btn btn-secondary" onclick="resetSpiral()">é‡ç½®</button>
      </div>
    </div>
  </div>

  <!-- å®æ—¶è®¡ç®—å™¨ -->
  <div class="calculator-section">
    <h2 class="section-title">ğŸ§® æ¬§æ‹‰å…¬å¼è®¡ç®—å™¨</h2>
    <div class="calc-input-group">
      <span class="calc-label">e<sup>i</sup></span>
      <input type="number" class="calc-input" id="calcTheta" value="3.14159" step="0.1">
      <span class="calc-label">= cos(Î¸) + iÂ·sin(Î¸)</span>
    </div>
    <div class="calc-result">
      <div class="calc-result-formula" id="calcFormula">e<sup>iÏ€</sup> = cos(Ï€) + iÂ·sin(Ï€)</div>
      <div class="calc-result-value" id="calcValue">= -1 + 0i = -1</div>
    </div>
  </div>

  <!-- ç¾å­¦è§£è¯» -->
  <div class="beauty-section">
    <div class="beauty-card">
      <div class="beauty-icon">ğŸ­</div>
      <div class="beauty-title">ç®€æ´ä¹‹ç¾</div>
      <div class="beauty-desc">ä»…ç”¨7ä¸ªç¬¦å·ï¼ˆe, i, Ï€, +, 1, =, 0ï¼‰ï¼Œè¿æ¥äº†æ•°å­¦äº”å¤§é¢†åŸŸï¼šåˆ†æã€ä»£æ•°ã€å‡ ä½•ã€ç®—æœ¯ã€é€»è¾‘</div>
    </div>
    <div class="beauty-card">
      <div class="beauty-icon">ğŸ”—</div>
      <div class="beauty-title">ç»Ÿä¸€ä¹‹ç¾</div>
      <div class="beauty-desc">æŒ‡æ•°å‡½æ•°ä¸ä¸‰è§’å‡½æ•°çš„æ¡¥æ¢ï¼Œå®æ•°ä¸è™šæ•°çš„ç»Ÿä¸€ï¼Œç¦»æ•£ä¸è¿ç»­çš„äº¤æ±‡</div>
    </div>
    <div class="beauty-card">
      <div class="beauty-icon">â™¾ï¸</div>
      <div class="beauty-title">æ„å¤–ä¹‹ç¾</div>
      <div class="beauty-desc">æ— ç†æ•°eçš„æ— ç†æ•°æ¬¡å¹‚ï¼Œç»“æœç«Ÿæ˜¯æœ€ç®€å•çš„æ•´æ•°-1ï¼Œè¿™ç§"æ„å¤–"ä»¤äººæƒŠå¹</div>
    </div>
  </div>

  <!-- å…¬å¼æ¨å¯¼ -->
  <div class="derivation-section">
    <h2 class="section-title">ğŸ“ ä»æ³°å‹’å±•å¼€åˆ°æ¬§æ‹‰å…¬å¼</h2>
    <div class="derivation-step" id="step1">
      <span class="step-number">1</span>
      <span class="step-title">e^x çš„æ³°å‹’å±•å¼€</span>
      <div class="step-content">
        <div class="step-formula">e<sup>x</sup> = 1 + x + xÂ²/2! + xÂ³/3! + xâ´/4! + ...</div>
        è¿™æ˜¯è‡ªç„¶æŒ‡æ•°å‡½æ•°åœ¨ x=0 å¤„çš„æ³°å‹’çº§æ•°å±•å¼€
      </div>
    </div>
    <div class="derivation-step" id="step2">
      <span class="step-number">2</span>
      <span class="step-title">å°† x æ›¿æ¢ä¸º ix</span>
      <div class="step-content">
        <div class="step-formula">e<sup>ix</sup> = 1 + ix + (ix)Â²/2! + (ix)Â³/3! + (ix)â´/4! + ...</div>
        åˆ©ç”¨ iÂ² = -1, iÂ³ = -i, iâ´ = 1 çš„å‘¨æœŸæ€§
      </div>
    </div>
    <div class="derivation-step" id="step3">
      <span class="step-number">3</span>
      <span class="step-title">åˆ†ç¦»å®éƒ¨ä¸è™šéƒ¨</span>
      <div class="step-content">
        <div class="step-formula">e<sup>ix</sup> = (1 - xÂ²/2! + xâ´/4! - ...) + i(x - xÂ³/3! + xâµ/5! - ...)</div>
        å®éƒ¨æ°å¥½æ˜¯ cos(x) çš„å±•å¼€ï¼Œè™šéƒ¨æ°å¥½æ˜¯ sin(x) çš„å±•å¼€
      </div>
    </div>
    <div class="derivation-step" id="step4">
      <span class="step-number">4</span>
      <span class="step-title">å¾—åˆ°æ¬§æ‹‰å…¬å¼</span>
      <div class="step-content">
        <div class="step-formula">e<sup>ix</sup> = cos(x) + iÂ·sin(x)</div>
        å½“ x = Ï€ æ—¶ï¼še<sup>iÏ€</sup> = cos(Ï€) + iÂ·sin(Ï€) = -1 + 0 = -1
      </div>
    </div>
    <div class="derivation-step" id="step5">
      <span class="step-number">5</span>
      <span class="step-title">æ¬§æ‹‰æ’ç­‰å¼</span>
      <div class="step-content">
        <div class="step-formula" style="color: #ffd700; font-size: 1.5rem;">e<sup>iÏ€</sup> + 1 = 0</div>
        äº”ä¸ªæœ€é‡è¦çš„æ•°å­¦å¸¸æ•°ï¼Œé€šè¿‡æœ€åŸºæœ¬çš„è¿ç®—ï¼Œå®Œç¾åœ°è”ç³»åœ¨ä¸€èµ·
      </div>
    </div>
    <button class="btn btn-primary" onclick="animateDerivation()" style="margin-top: 20px;">â–¶ æ’­æ”¾æ¨å¯¼åŠ¨ç”»</button>
  </div>

  <!-- å†å²æ—¶é—´çº¿ -->
  <div class="derivation-section">
    <h2 class="section-title">ğŸ“œ å†å²è¶³è¿¹</h2>
    <div class="timeline-section">
      <div class="timeline-item">
        <div class="timeline-year">1714å¹´</div>
        <div class="timeline-content">ç½—æ°Â·ç§‘èŒ¨é¦–æ¬¡å‘ç°äº†ç±»ä¼¼çš„å…³ç³»å¼ï¼Œä½†æœªèƒ½å®Œå…¨ç†è§£å…¶æ„ä¹‰</div>
      </div>
      <div class="timeline-item">
        <div class="timeline-year">1748å¹´</div>
        <div class="timeline-content">è±æ˜‚å“ˆå¾·Â·æ¬§æ‹‰åœ¨ã€Šæ— ç©·åˆ†æå¼•è®ºã€‹ä¸­æ­£å¼å‘è¡¨ e<sup>ix</sup> = cos(x) + iÂ·sin(x)</div>
      </div>
      <div class="timeline-item">
        <div class="timeline-year">1988å¹´</div>
        <div class="timeline-content">ã€Šæ•°å­¦æ™ºåŠ›ã€‹æ‚å¿—è¯»è€…æŠ•ç¥¨ï¼Œæ¬§æ‹‰æ’ç­‰å¼è¢«è¯„ä¸º"æœ€ç¾ä¸½çš„æ•°å­¦å…¬å¼"</div>
      </div>
      <div class="timeline-item">
        <div class="timeline-year">2004å¹´</div>
        <div class="timeline-content">ã€Šç‰©ç†ä¸–ç•Œã€‹æ‚å¿—è°ƒæŸ¥ï¼Œæ¬§æ‹‰æ’ç­‰å¼å†æ¬¡è¢«è¯„ä¸º"å²ä¸Šæœ€ä¼Ÿå¤§çš„æ–¹ç¨‹"</div>
      </div>
    </div>
  </div>

  <!-- åˆ†äº«åŒºåŸŸ -->
  <div class="calculator-section" style="text-align: center;">
    <h2 class="section-title">ğŸ’« åˆ†äº«è¿™ä»½æ•°å­¦ä¹‹ç¾</h2>
    <p style="color: rgba(255,255,255,0.6); margin-bottom: 20px;">
      å¦‚æœä½ ä¹Ÿè¢«æ¬§æ‹‰å…¬å¼çš„ç¾æ‰€æ‰“åŠ¨ï¼Œä¸å¦¨åˆ†äº«ç»™æ›´å¤šäºº
    </p>
    <button class="btn btn-primary" onclick="copyShareText()" style="padding: 15px 40px;">
      ğŸ“‹ å¤åˆ¶åˆ†äº«æ–‡æ¡ˆ
    </button>
    <div id="copyToast" style="display: none; margin-top: 15px; color: #4ade80;">âœ“ å·²å¤åˆ¶åˆ°å‰ªè´´æ¿</div>
  </div>
</div>

<script>
// ========== å¤å¹³é¢å¯è§†åŒ– ==========
const complexCanvas = document.getElementById('complexPlane');
const complexCtx = complexCanvas.getContext('2d');
let animationId = null;
let currentTheta = Math.PI;

function initCanvas(canvas) {
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.getBoundingClientRect();
  canvas.width = rect.width * dpr;
  canvas.height = rect.height * dpr;
  const ctx = canvas.getContext('2d');
  ctx.scale(dpr, dpr);
  return { width: rect.width, height: rect.height };
}

function drawComplexPlane(theta) {
  const { width, height } = initCanvas(complexCanvas);
  const ctx = complexCtx;
  const centerX = width / 2;
  const centerY = height / 2;
  const radius = Math.min(width, height) * 0.35;
  
  // æ¸…ç©ºç”»å¸ƒ
  ctx.clearRect(0, 0, width, height);
  
  // ç»˜åˆ¶ç½‘æ ¼
  ctx.strokeStyle = 'rgba(255,255,255,0.05)';
  ctx.lineWidth = 1;
  for (let i = -5; i <= 5; i++) {
    ctx.beginPath();
    ctx.moveTo(centerX + i * radius / 2, 0);
    ctx.lineTo(centerX + i * radius / 2, height);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(0, centerY + i * radius / 2);
    ctx.lineTo(width, centerY + i * radius / 2);
    ctx.stroke();
  }
  
  // ç»˜åˆ¶åæ ‡è½´
  ctx.strokeStyle = 'rgba(255,255,255,0.3)';
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(0, centerY);
  ctx.lineTo(width, centerY);
  ctx.moveTo(centerX, 0);
  ctx.lineTo(centerX, height);
  ctx.stroke();
  
  // è½´æ ‡ç­¾
  ctx.fillStyle = 'rgba(255,255,255,0.5)';
  ctx.font = '14px serif';
  ctx.fillText('Re', width - 25, centerY - 10);
  ctx.fillText('Im', centerX + 10, 20);
  ctx.fillText('1', centerX + radius + 5, centerY + 15);
  ctx.fillText('-1', centerX - radius - 15, centerY + 15);
  ctx.fillText('i', centerX + 5, centerY - radius - 5);
  ctx.fillText('-i', centerX + 5, centerY + radius + 15);

  // ç»˜åˆ¶å•ä½åœ†
  ctx.strokeStyle = 'rgba(255,215,0,0.3)';
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
  ctx.stroke();
  
  // ç»˜åˆ¶è§’åº¦å¼§
  ctx.strokeStyle = 'rgba(79,195,247,0.5)';
  ctx.lineWidth = 3;
  ctx.beginPath();
  ctx.arc(centerX, centerY, radius * 0.3, 0, -theta, true);
  ctx.stroke();
  
  // ç»˜åˆ¶ä»åŸç‚¹åˆ°ç‚¹çš„çº¿
  const x = Math.cos(theta);
  const y = Math.sin(theta);
  const pointX = centerX + x * radius;
  const pointY = centerY - y * radius;
  
  ctx.strokeStyle = '#ffd700';
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(centerX, centerY);
  ctx.lineTo(pointX, pointY);
  ctx.stroke();
  
  // ç»˜åˆ¶è™šçº¿æŠ•å½±
  ctx.strokeStyle = 'rgba(255,255,255,0.2)';
  ctx.setLineDash([5, 5]);
  ctx.beginPath();
  ctx.moveTo(pointX, pointY);
  ctx.lineTo(pointX, centerY);
  ctx.moveTo(pointX, pointY);
  ctx.lineTo(centerX, pointY);
  ctx.stroke();
  ctx.setLineDash([]);
  
  // ç»˜åˆ¶ç‚¹
  ctx.fillStyle = '#ffd700';
  ctx.beginPath();
  ctx.arc(pointX, pointY, 8, 0, Math.PI * 2);
  ctx.fill();
  ctx.fillStyle = '#1a1a2e';
  ctx.beginPath();
  ctx.arc(pointX, pointY, 4, 0, Math.PI * 2);
  ctx.fill();
  
  // æ˜¾ç¤ºåæ ‡
  ctx.fillStyle = '#ffd700';
  ctx.font = 'bold 14px monospace';
  const coordText = `(${x.toFixed(3)}, ${y.toFixed(3)}i)`;
  ctx.fillText(coordText, pointX + 15, pointY - 15);
  
  // æ˜¾ç¤º e^(iÎ¸)
  ctx.fillStyle = '#4fc3f7';
  ctx.font = 'italic 16px serif';
  ctx.fillText(`e^(iÂ·${(theta/Math.PI).toFixed(2)}Ï€)`, 15, 30);
}

// ========== èºæ—‹ç”»å¸ƒ ==========
const spiralCanvas = document.getElementById('spiralCanvas');
const spiralCtx = spiralCanvas.getContext('2d');

function drawSpiralCanvas(realCoef = 0) {
  const { width, height } = initCanvas(spiralCanvas);
  const ctx = spiralCtx;
  const centerX = width / 2;
  const centerY = height / 2;
  const scale = Math.min(width, height) * 0.15;
  
  ctx.clearRect(0, 0, width, height);
  
  // ç»˜åˆ¶åæ ‡è½´
  ctx.strokeStyle = 'rgba(255,255,255,0.2)';
  ctx.lineWidth = 1;
  ctx.beginPath();
  ctx.moveTo(0, centerY);
  ctx.lineTo(width, centerY);
  ctx.moveTo(centerX, 0);
  ctx.lineTo(centerX, height);
  ctx.stroke();
  
  // ç»˜åˆ¶ e^((a+i)Î¸) çš„è½¨è¿¹
  ctx.strokeStyle = '#ffd700';
  ctx.lineWidth = 2;
  ctx.beginPath();
  
  let first = true;
  for (let t = 0; t <= Math.PI * 6; t += 0.02) {
    const r = Math.exp(realCoef * t);
    const x = r * Math.cos(t);
    const y = r * Math.sin(t);
    const px = centerX + x * scale;
    const py = centerY - y * scale;
    
    if (first) {
      ctx.moveTo(px, py);
      first = false;
    } else {
      ctx.lineTo(px, py);
    }
  }
  ctx.stroke();
  
  // æ ‡æ³¨ç‰¹æ®Šç‚¹
  const specialPoints = [
    { t: 0, label: 'Î¸=0' },
    { t: Math.PI, label: 'Î¸=Ï€' },
    { t: Math.PI * 2, label: 'Î¸=2Ï€' }
  ];
  
  ctx.fillStyle = '#4fc3f7';
  ctx.font = '12px monospace';
  specialPoints.forEach(p => {
    const r = Math.exp(realCoef * p.t);
    const x = r * Math.cos(p.t);
    const y = r * Math.sin(p.t);
    const px = centerX + x * scale;
    const py = centerY - y * scale;
    
    ctx.beginPath();
    ctx.arc(px, py, 5, 0, Math.PI * 2);
    ctx.fill();
    ctx.fillText(p.label, px + 8, py - 8);
  });
  
  // æ˜¾ç¤ºå…¬å¼
  ctx.fillStyle = 'rgba(255,255,255,0.7)';
  ctx.font = 'italic 14px serif';
  if (realCoef === 0) {
    ctx.fillText('e^(iÎ¸) - å•ä½åœ†', 15, 25);
  } else {
    ctx.fillText(`e^((${realCoef.toFixed(1)}+i)Î¸) - å¯¹æ•°èºæ—‹`, 15, 25);
  }
}

// ========== äº¤äº’æ§åˆ¶ ==========
const thetaSlider = document.getElementById('thetaSlider');
const thetaValue = document.getElementById('thetaValue');
const realCoefSlider = document.getElementById('realCoef');
const realValue = document.getElementById('realValue');

thetaSlider.addEventListener('input', function() {
  currentTheta = parseFloat(this.value);
  updateThetaDisplay();
  drawComplexPlane(currentTheta);
});

realCoefSlider.addEventListener('input', function() {
  const val = parseFloat(this.value);
  realValue.textContent = `a = ${val.toFixed(1)}`;
  drawSpiralCanvas(val);
});

function updateThetaDisplay() {
  const piMultiple = currentTheta / Math.PI;
  if (Math.abs(piMultiple - Math.round(piMultiple)) < 0.01) {
    const n = Math.round(piMultiple);
    if (n === 0) thetaValue.textContent = 'Î¸ = 0';
    else if (n === 1) thetaValue.textContent = 'Î¸ = Ï€';
    else if (n === -1) thetaValue.textContent = 'Î¸ = -Ï€';
    else thetaValue.textContent = `Î¸ = ${n}Ï€`;
  } else {
    thetaValue.textContent = `Î¸ = ${piMultiple.toFixed(2)}Ï€`;
  }
}

function animateRotation() {
  if (animationId) {
    cancelAnimationFrame(animationId);
    animationId = null;
    return;
  }
  
  let startTheta = 0;
  const duration = 4000;
  const startTime = performance.now();
  
  function animate(time) {
    const elapsed = time - startTime;
    const progress = Math.min(elapsed / duration, 1);
    currentTheta = startTheta + progress * Math.PI * 2;
    
    thetaSlider.value = currentTheta;
    updateThetaDisplay();
    drawComplexPlane(currentTheta);
    
    if (progress < 1) {
      animationId = requestAnimationFrame(animate);
    } else {
      animationId = null;
    }
  }
  
  animationId = requestAnimationFrame(animate);
}

function resetToPI() {
  if (animationId) {
    cancelAnimationFrame(animationId);
    animationId = null;
  }
  currentTheta = Math.PI;
  thetaSlider.value = Math.PI;
  updateThetaDisplay();
  drawComplexPlane(currentTheta);
}

function drawSpiral() {
  const val = parseFloat(realCoefSlider.value);
  // æ·»åŠ åŠ¨ç”»æ•ˆæœï¼šå…ˆæ¸…ç©ºå†é‡ç»˜
  const { width, height } = initCanvas(spiralCanvas);
  spiralCtx.clearRect(0, 0, width, height);
  
  // åŠ¨ç”»ç»˜åˆ¶èºæ—‹
  animateSpiralDraw(val);
}

function animateSpiralDraw(realCoef) {
  const { width, height } = initCanvas(spiralCanvas);
  const ctx = spiralCtx;
  const centerX = width / 2;
  const centerY = height / 2;
  const scale = Math.min(width, height) * 0.15;
  const maxTheta = Math.PI * 6;
  const duration = 1500;
  const startTime = performance.now();
  
  function animate(time) {
    const elapsed = time - startTime;
    const progress = Math.min(elapsed / duration, 1);
    const currentMaxTheta = progress * maxTheta;
    
    ctx.clearRect(0, 0, width, height);
    
    // ç»˜åˆ¶åæ ‡è½´
    ctx.strokeStyle = 'rgba(255,255,255,0.2)';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(0, centerY);
    ctx.lineTo(width, centerY);
    ctx.moveTo(centerX, 0);
    ctx.lineTo(centerX, height);
    ctx.stroke();
    
    // ç»˜åˆ¶èºæ—‹
    ctx.strokeStyle = '#ffd700';
    ctx.lineWidth = 2;
    ctx.beginPath();
    
    let first = true;
    for (let t = 0; t <= currentMaxTheta; t += 0.02) {
      const r = Math.exp(realCoef * t);
      const x = r * Math.cos(t);
      const y = r * Math.sin(t);
      const px = centerX + x * scale;
      const py = centerY - y * scale;
      
      if (first) {
        ctx.moveTo(px, py);
        first = false;
      } else {
        ctx.lineTo(px, py);
      }
    }
    ctx.stroke();
    
    // æ˜¾ç¤ºå…¬å¼
    ctx.fillStyle = 'rgba(255,255,255,0.7)';
    ctx.font = 'italic 14px serif';
    if (realCoef === 0) {
      ctx.fillText('e^(iÎ¸) - å•ä½åœ†', 15, 25);
    } else {
      ctx.fillText(`e^((${realCoef.toFixed(1)}+i)Î¸) - å¯¹æ•°èºæ—‹`, 15, 25);
    }
    
    if (progress < 1) {
      requestAnimationFrame(animate);
    } else {
      // ç»˜åˆ¶å®Œæˆåæ·»åŠ ç‰¹æ®Šç‚¹æ ‡æ³¨
      const specialPoints = [
        { t: 0, label: 'Î¸=0' },
        { t: Math.PI, label: 'Î¸=Ï€' },
        { t: Math.PI * 2, label: 'Î¸=2Ï€' }
      ];
      
      ctx.fillStyle = '#4fc3f7';
      ctx.font = '12px monospace';
      specialPoints.forEach(p => {
        const r = Math.exp(realCoef * p.t);
        const x = r * Math.cos(p.t);
        const y = r * Math.sin(p.t);
        const px = centerX + x * scale;
        const py = centerY - y * scale;
        
        ctx.beginPath();
        ctx.arc(px, py, 5, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillText(p.label, px + 8, py - 8);
      });
    }
  }
  
  requestAnimationFrame(animate);
}

function resetSpiral() {
  realCoefSlider.value = 0;
  realValue.textContent = 'a = 0';
  drawSpiralCanvas(0);
}

// ========== è®¡ç®—å™¨ ==========
const calcTheta = document.getElementById('calcTheta');
const calcFormula = document.getElementById('calcFormula');
const calcValue = document.getElementById('calcValue');

calcTheta.addEventListener('input', updateCalculator);

function updateCalculator() {
  const theta = parseFloat(calcTheta.value) || 0;
  const cosVal = Math.cos(theta);
  const sinVal = Math.sin(theta);
  
  // æ ¼å¼åŒ–æ˜¾ç¤º
  const thetaStr = formatTheta(theta);
  calcFormula.innerHTML = `e<sup>iÂ·${thetaStr}</sup> = cos(${thetaStr}) + iÂ·sin(${thetaStr})`;
  
  // è®¡ç®—ç»“æœ
  const realPart = cosVal.toFixed(6);
  const imagPart = sinVal.toFixed(6);
  
  let result = '';
  if (Math.abs(sinVal) < 0.0001) {
    result = `= ${realPart}`;
  } else if (Math.abs(cosVal) < 0.0001) {
    result = `= ${imagPart}i`;
  } else {
    const sign = sinVal >= 0 ? '+' : '-';
    result = `= ${realPart} ${sign} ${Math.abs(sinVal).toFixed(6)}i`;
  }
  
  calcValue.textContent = result;
}

function formatTheta(theta) {
  const piMultiple = theta / Math.PI;
  if (Math.abs(piMultiple - Math.round(piMultiple * 4) / 4) < 0.01) {
    const n = Math.round(piMultiple * 4) / 4;
    if (n === 0) return '0';
    if (n === 1) return 'Ï€';
    if (n === -1) return '-Ï€';
    if (n === 0.5) return 'Ï€/2';
    if (n === -0.5) return '-Ï€/2';
    if (n === 0.25) return 'Ï€/4';
    return `${n}Ï€`;
  }
  return theta.toFixed(3);
}

// ========== æ¨å¯¼åŠ¨ç”» ==========
function animateDerivation() {
  const steps = document.querySelectorAll('.derivation-step');
  steps.forEach(step => step.classList.remove('visible'));
  
  steps.forEach((step, index) => {
    setTimeout(() => {
      step.classList.add('visible');
    }, index * 800);
  });
}

// ========== å¸¸æ•°é«˜äº® ==========
function highlightConstant(card) {
  document.querySelectorAll('.constant-card').forEach(c => c.classList.remove('active'));
  card.classList.add('active');
  
  const constant = card.dataset.constant;
  const descriptions = {
    'e': 'è‡ªç„¶å¸¸æ•° e â‰ˆ 2.71828... æ˜¯è‡ªç„¶å¯¹æ•°çš„åº•æ•°ï¼Œæè¿°è¿ç»­å¢é•¿çš„æé™ã€‚å®ƒå‡ºç°åœ¨å¤åˆ©è®¡ç®—ã€æ¦‚ç‡è®ºã€å¾®ç§¯åˆ†ç­‰ä¼—å¤šé¢†åŸŸã€‚',
    'i': 'è™šæ•°å•ä½ i = âˆš(-1)ï¼Œæ‰“å¼€äº†å¤æ•°çš„å¤§é—¨ã€‚å®ƒè®©æˆ‘ä»¬èƒ½å¤Ÿè§£å†³ xÂ² + 1 = 0 è¿™æ ·åœ¨å®æ•°èŒƒå›´å†…æ— è§£çš„æ–¹ç¨‹ã€‚',
    'pi': 'åœ†å‘¨ç‡ Ï€ â‰ˆ 3.14159... æ˜¯åœ†çš„å‘¨é•¿ä¸ç›´å¾„ä¹‹æ¯”ï¼Œæ˜¯å‡ ä½•å­¦ä¸­æœ€é‡è¦çš„å¸¸æ•°ï¼Œä¹Ÿå‡ºç°åœ¨æ¦‚ç‡ã€ç‰©ç†ç­‰é¢†åŸŸã€‚',
    '1': '1 æ˜¯ä¹˜æ³•çš„å•ä½å…ƒï¼Œæ˜¯è‡ªç„¶æ•°çš„èµ·ç‚¹ï¼Œä»£è¡¨"å­˜åœ¨"å’Œ"ç»Ÿä¸€"ã€‚ä»»ä½•æ•°ä¹˜ä»¥1éƒ½ç­‰äºå®ƒæœ¬èº«ã€‚',
    '0': '0 æ˜¯åŠ æ³•çš„å•ä½å…ƒï¼Œä»£è¡¨"è™šæ— "ã€‚å®ƒæ˜¯äººç±»æ•°å­¦å²ä¸Šæœ€ä¼Ÿå¤§çš„å‘æ˜ä¹‹ä¸€ï¼Œè®©ä½å€¼è®°æ•°æ³•æˆä¸ºå¯èƒ½ã€‚'
  };
  
  // å¯ä»¥æ·»åŠ ä¸€ä¸ªæè¿°åŒºåŸŸæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
  console.log(descriptions[constant]);
}

// ========== åˆ†äº«åŠŸèƒ½ ==========
function copyShareText() {
  const shareText = `ğŸŒŸ æ¬§æ‹‰å…¬å¼ e^(iÏ€) + 1 = 0

è¢«è´¹æ›¼ç§°ä¸º"æ•°å­¦çš„ç å®"ï¼Œè¿™ä¸ªå…¬å¼ç”¨7ä¸ªç¬¦å·è¿æ¥äº†æ•°å­¦äº”å¤§é¢†åŸŸï¼š
â€¢ e - è‡ªç„¶å¸¸æ•°ï¼ˆåˆ†æå­¦ï¼‰
â€¢ i - è™šæ•°å•ä½ï¼ˆä»£æ•°å­¦ï¼‰  
â€¢ Ï€ - åœ†å‘¨ç‡ï¼ˆå‡ ä½•å­¦ï¼‰
â€¢ 1 - ä¹˜æ³•å•ä½å…ƒï¼ˆç®—æœ¯ï¼‰
â€¢ 0 - åŠ æ³•å•ä½å…ƒï¼ˆé€»è¾‘ï¼‰

æ¥è¿™ä¸ªäº¤äº’å¼æ¼”ç¤ºäº²çœ¼çœ‹çœ‹å®ƒçš„ç¾ ğŸ‘‡
${window.location.href}`;

  navigator.clipboard.writeText(shareText).then(() => {
    const toast = document.getElementById('copyToast');
    toast.style.display = 'block';
    setTimeout(() => {
      toast.style.display = 'none';
    }, 2000);
  });
}

// ========== åˆå§‹åŒ– ==========
window.addEventListener('load', () => {
  drawComplexPlane(Math.PI);
  drawSpiralCanvas(0);
  updateCalculator();
  
  // å»¶è¿Ÿæ˜¾ç¤ºæ¨å¯¼æ­¥éª¤
  setTimeout(() => {
    document.querySelectorAll('.derivation-step').forEach(step => {
      step.classList.add('visible');
    });
  }, 500);
});

// çª—å£å¤§å°æ”¹å˜æ—¶é‡ç»˜
window.addEventListener('resize', () => {
  drawComplexPlane(currentTheta);
  drawSpiralCanvas(parseFloat(realCoefSlider.value));
});
</script>
</body>
</html>
